{"version":3,"sources":["util-math.js","util-cal.js","effects.js","App.js","util-ui.js","serviceWorker.js","index.js"],"names":["œÑ","Math","PI","œÄ","radians","abs","sin","cos","tan","round","sign","sqrt","pow","log","min","max","trunc","floor","random","randomInt","max_1","randomRange","v","p","vF","arguments","length","undefined","Number","isInteger","parseFloat","toFixed","getJulianDay","date","getTime","normB","B","StarryNight","props","txtCvsRef","useRef","canvasRef","useEffect","txtCvs","current","canvas","ctx","getContext","txt","alpha","randomHue","arr","stars","clearRect","width","height","i","beginPath","arc","fillStyle","concat","fill","createPattern","fillRect","console","react_default","a","createElement","Fragment","ref","txtW","style","visibility","position","left","top","BackDrop","back","_useState","useState","_useState2","Object","slicedToArray","backId","switchBackground","transition","background","effects_StarryNight","substring","onClick","Date","sekki_hue","at_deg","cmd","at_px","atXY_deg","cond","atXY_px","getPosSunDEBUG","msg","pos","j","g","gx2","longitude","distance","getPosSun","toLocaleString","MODES","Card3D","initState","mode","horiz","heat","zoom","emoji","persp","tilto","roti","croty","scale","opact","_useReducer","useReducer","state","action","toggleSeq","seq","id","indexOf","type","objectSpread","payload","v1","v2","Error","_useReducer2","dispatch","sunLon","setSunLon","cell_n","items","bCrs","tilt","cell_n_2","d_cell","d_cell_2","cell_s","cellWidth","cellHeight","crs_r","roty_crs","i_ff","dr_tilt","cols_table","sceneStyle","--pp","--cell_op","carouselStyle","transform","innerFrontFacingStyle","--sun_r","precalc_cell","zff","trans_cell_ENV","trans_cell_ENV_zff","transformCell","crsCell","item","forefront","shortest_ipath","d","classSfx","key","className","zIndex","hue","role","aria-label","sekki","s24emoji","s72","map","s","callback","delay","savedCallback","setInterval","clearInterval","useInterval","App_ControlCrs","opacity","s24","ControlCrs","_ref","App_TestBtn","window","innerWidth","innerHeight","disabled","placeholder","TestBtn","assign","children","DebugOut","row","color","App","w","ws","_useState3","h","_useState4","winSize","setWinSize","handleWindowResize","addEventListener","removeEventListener","useWindowSize","mw","mh","gr","cell_w","cell_h","effects_BackDrop","App_Card3D","App_DebugOut","Boolean","location","hostname","match","rootEl","document","getElementById","ReactDOM","render","src_App_0","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.bb86d604.chunk.js","sourcesContent":["// Math definitions: Just for readability\n// https://github.com/d3/d3-geo/blob/master/src/math.js\n\n// consider degeneracy and robustness\n\nexport const œÑ    = Math.PI*2;\nexport const œÄ    = Math.PI;\nexport const œÄ_2  = Math.PI/2;\nexport const œÄ_4  = Math.PI/4;\nexport const Œµ    = 1e-6;      // a small threshold value for the floating point computation\nexport const Œµ2   = 1e-12;\n\nexport const deg360 = 360;         // declare the special degree as the constant, name it.\nexport const deg180 = 180;\nexport const deg90  = 90;\nexport const degrees = deg180 / œÄ;\nexport const radians = œÄ / deg180;\nexport const œÄ_2xdegrees = deg90;  // œÄ/2 x degrees\nexport const abs   = Math.abs;\nexport const sin   = Math.sin;\nexport const cos   = Math.cos;\nexport const tan   = Math.tan;\nexport const sign  = Math.sign;\nexport const sqrt  = Math.sqrt;\nexport const pow   = Math.pow;\nexport const log   = Math.log;\n\nexport const min   = Math.min;\nexport const max   = Math.max;\nexport const round = Math.round;\nexport const trunc = Math.trunc;\nexport const floor = Math.floor;\nexport const random = Math.random;  // range [0, 1) never returns 1\n\nexport const randomInt   = max_1 => floor( random() * max_1 );  // range [0, max-1]\nexport const randomRange = (min, v, p) => vF( min + v * random(), p );\nexport const randomElement = arr => arr[floor( random()*arr.length )];\n\nexport const vF = (v, p=3) => Number.isInteger(v) ? v : parseFloat(v.toFixed(p));  // fixed digit number with precision=p\n\nexport const zero    = v => abs(v) < Œµ;        // is virtually zero?\nexport const epsilon = v => zero(v) ? 0 : v;   // reduce an infinitesimal number to zero\n\n// to avoid NaN for the invalid domain ranges\nexport const asin = x => x > 1 ? œÄ/2 : x < -1  ? -œÄ/2 : Math.asin(x);\nexport const acos = x => x > 1 ? 0   : x < -1  ? œÄ    : Math.acos(x);\n\n// https://en.wikipedia.org/wiki/Haversine_formula\nexport const haversin = x => (x = sin(x/2))*x;\nexport const range = (x, r1, r2) => min(max(x, r1), r2);  // let r1 ‚â¶ x ‚â¶ r2\n\n","// SpacetimeQ CalUtil, by Soomin K.\n//\n// [JavaScript Dates](https://flaviocopes.com/javascript-dates/)\n\nimport Names from './names.json';\nimport { deg360, radians, sin, cos } from './util-math';\n\n// Check if the given year is a leap year in the Gregorian calendar\nexport const IsLeapYear = y =>\n  ((y % 4   === 0) &&\n   (y % 100 !== 0)) ||\n   (y % 400 === 0);\n\n// const DaysInMonth = (m, y) => new Date(y, m, 0).getDate();\n// m: 1..12\n// Gregorian Calendar: Sep. 1752 -> 1,2,14,...30 (11 days advanced)\nexport const DaysInMonth = (m, y) => {\n  if (y === 1752 && m === 9)\n    return 19;  // special case\n  switch (m) {\n    case 4:\n    case 6:\n    case 9:  \n    case 11: return 30;\n    case 2:  return IsLeapYear(y) ? 29 : 28;\n    default: return 31;\n  }\n}\n\n// Count the number of days with the year up to the specified date\n// m starts from 1\nexport const NthDayInYear = (yr, m, d) => {\n  // For the optimized performance, avoid the loop and use the pre-calculated array\n  // of accumulated days until the month (not a leap year)\n  const accDays = [\n    0,\n    31,\n    31+28,\n    31+28+31,\n    31+28+31+30,\n    31+28+31+30+31,\n    31+28+31+30+31+30,\n    31+28+31+30+31+30+31,\n    31+28+31+30+31+30+31+31,\n    31+28+31+30+31+30+31+31+30,\n    31+28+31+30+31+30+31+31+30+31,\n    31+28+31+30+31+30+31+31+30+31+30\n  // 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11 month\n  ];\n  if (m < 1 || m > 12)\n    return 0;  // valid range check\n  let days = accDays[m-1];\n  if (m > 2 && IsLeapYear(yr))\n    days++;\n  if (yr === 1752 && m >= 9 && d > 2) {\n    days -= (d < 14) ? (d - 2) : 11;\n  }\n  return (days + d);\n}\n\n// ÂÖÉÂè∑ from Ë•øÊö¶\nexport const GengoYear = yr => {\n  for (let i = Names.Gengo.yr.length - 1; i >= 0; i--)\n    if (yr >= Names.Gengo.yr[i]) {\n      const diff = yr - Names.Gengo.yr[i];\n      return Names.Gengo.jp[i] + ( (diff > 0) ? diff : 'ÂÖÉ');\n    }\n  return yr;   // out of range, just return yr\n}\n\n// get Julian Day Number\n// Invented in 1583 by Joseph Scaliger\n// The 7980 year cycle (solar, lunar, and a particular Roman tax cycle)\n// Jan.1,4713 B.C. at noon GMT ~ Jan.22,3268 at noon GMT\n// The number of days from Jan. 1, 4713 B.C. at 12:00:00 GMT, until Jan. 1, 1970 at 00:00:00 UTC\n// A day is 86,400 seconds long. UNIX TIM / 86400000 is the number of days since Jan. 1, 1970\n// new Date gives you the number of seconds from epoch until whatever loca ltime your computer has\nexport const getJulianDay = date => (date.getTime() / 86400000.0 + 2440587.5);\n\n// SOURCE: https://news.local-group.jp/moonage/moonage.js.txt\nexport const getMoonAge = date => {\n  // Êñ∞ÊúàÊó•Ë®àÁÆó\n  // ÂºïÊï∞  „ÄÄjulian  „É¶„É™„Ç¶„ÇπÈÄöÊó•\n  // Êàª„ÇäÂÄ§  ‰∏é„Åà„Çâ„Çå„Åü„É¶„É™„Ç¶„ÇπÈÄöÊó•„Å´ÂØæ„Åô„ÇãÁõ¥Ââç„ÅÆÊñ∞ÊúàÊó•(„É¶„É™„Ç¶„ÇπÊó•)\n  const getNewMoon = j => {\n    const n1 = 2451550.09765;\n    const n2 = 29.530589;\n    const n3 = 0.017453292519943;\n    const k  = Math.floor( (j - n1) / n2 );\n    const t  = k / 1236.85;\n\n    return (\n        n1\n      + n2 * k\n      + 0.0001337 * t * t\n      - 0.40720   * sin( (201.5643 + 385.8169 * k) * n3)\n      + 0.17241   * sin( (2.5534   +  29.1054 * k) * n3)\n    );\n  }\n  \n  const jd = getJulianDay(date);\n  // console.log('Julian: ', jl);\n  let nm = getNewMoon(jd);\n  // getNewMoon„ÅØÊñ∞ÊúàÁõ¥Ââç„ÅÆÊó•„Çí‰∏é„Åà„Çã„Å®„ÅÜ„Åæ„ÅèË®àÁÆó„Åß„Åç„Å™„ÅÑ„ÅÆ„Åß„Åù„ÅÆÂØæÂá¶\n  // (‰∏ÄÊó•Ââç„ÅÆÊó•‰ªò„ÅßÂÜçË®àÁÆó„Åó„Å¶„Åø„Çã)\n  if (nm > jd) {\n    nm = getNewMoon(jd - 1.0);\n  }\n  // console.log('Moon age:', jd - nm);\n  return (jd - nm);  // moon's age at current time\n}\n\n// normalize for any positive integer B (base), mapping to a non-negative integer that falls in [0, B]\n// ex) To keep degree in the range [0, 360], norm_B(-270, 360) = 90\nexport const normB = (v, B=deg360) =>   // norm_B(x, 360), norm_B(x, 24)\n  (v >= 0 && v <= B) ?  // best case: 2 compares, worst case: 3 compares + 2 (%,+) op\n    v :\n    (v >= 0) ?\n      v % B :\n      (v % B) + B;  // this cannot exceed B since (v % B) is negative\n// ( (v % B) + B ) % B;  // without comparisons version, 3 (%,+,%) operations for any cases\n\n// Position of the Sun: https://en.wikipedia.org/wiki/Position_of_the_Sun\n// Precision: compared to ÂõΩÁ´ãÂ§©ÊñáÂè∞ÔºûÊö¶Ë®àÁÆóÂÆ§ÔºûÊö¶Ë±°Âπ¥Ë°®\n//   1.26 ~ 15.41 min (0.0106 degree) for 2019Âπ¥‰∫åÂçÅÂõõÁØÄÊ∞ó Ë¶ñÈªÑÁµå (Tested at Dec.6,2018)\n// Performance: 36.42ms/10,000runs, 78.0~167ms/100,000runs, 575.3ms/1M-runs (MacBook Pro, E 2013, 2.6GHz Intel Core i5)\n// Usage: const pos = getPosSun(new Date());\nexport const getPosSun = date => {\n  const j = getJulianDay( (date === undefined) ? new Date() : date ) - 2451545.0;\n  // The mean longitude of the Sun, corrected for the aberration of light\n  const L = 280.460 + 0.9856474 * j;  // in degree\n  // The mean anomaly of the Sun\n  const g = ( 357.528 + 0.9856003 * j ) * radians;  // in radian\n  const gx2 = g * 2;\n  // The ecliptic longitude of the Sun\n  return {\n    longitude: normB( L + 1.915 * sin(g) + 0.020   * sin(gx2) ),\n    distance: 1.00014 - 0.01671  * cos(g) - 0.00014 * cos(gx2)  // AU = 149597870700 m\n  };\n}\n","import React, { useState, useRef, useEffect } from 'react';\nimport {\n  randomRange, randomInt, randomElement, œÑ\n} from './util-math';\n\n// Actually, we don't have to regenerate the pattern for each screen resize.\n// If we can save the result, just repaint with the same pattern for the new screen.\nconst StarryNight = props => {\n  const txtCvsRef = useRef(null);  // texture canvas reference, offscreen canvas\n  const canvasRef = useRef(null);\n  const txtW = 301;\n\n  useEffect(() => {\n    const txtCvs = txtCvsRef.current;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const txt = txtCvs.getContext('2d', { alpha: false });  // no transparent, to optimize rendering\n\n    const randomHue = () => randomElement( [0, 30, 60, 90, 120, 180, 240] );  // colors\n    const stars = 500 + randomInt( 500 );\n\n    txt.clearRect(0, 0, txtCvs.width, txtCvs.height);  // Otherwise the pattern will be accumulated\n    for (let i=0; i < stars; i++) {\n      txt.beginPath();\n      txt.arc(randomInt( txtW ), randomInt( txtW ), randomRange(.1, .8, 2), 0, œÑ);\n      txt.fillStyle = `hsla(${randomHue()},${50 + randomInt( 50 )}%,88%,${randomRange(.4, 1-.4, 2)})`;\n      txt.fill();  // fill() was faster than stroke()\n    }\n    ctx.fillStyle = ctx.createPattern(txtCvs, 'repeat');  // create pattern from txtCvs canvas in ctx\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    console.log(stars, \"stars generated: \",\n      Math.floor( stars * props.width * props.height / ( (txtW-1) * (txtW-1) ) ), \"in total\");\n  }, [props.width, props.height]);  // only when size changes\n\n  return (\n    <>\n      <canvas ref={txtCvsRef} width={txtW-1} height={txtW-1} style={{ visibility: 'hidden' }} />\n      <canvas ref={canvasRef} width={props.width} height={props.height}\n        style={{\n          position: 'absolute',\n          left: '0',\n          top: '0',\n          visibility: props.visibility  // works only in style\n        }}\n      />\n    </>\n  );\n}\n\n// When showing images just hide <StarryNight /> with visibility to prevent destroying it that will be costly.\n// image files should be in ../public/images/\nexport const BackDrop = props => {\n  const back = [\n    \"Black\",\n    \"#000032\",\n    \"#191970\",  // MidnightBlue\n    \"url('images/back1.jpg')\",\n    \"url('images/back2.jpg')\",\n    \"url('images/back3.jpg')\",\n  ];\n  const [backId, switchBackground] = useState(0);\n\n  return (\n    <div style={{\n      position: 'absolute',\n      width: props.width,\n      height: props.height,\n      transition: 'background 2s',\n      background: back[backId]\n    }}>\n      <StarryNight width={props.width} height={props.height}\n                   visibility={(back[backId].substring(0,3) === 'url') ? 'hidden' : 'visible'} />\n      <button style={{position: 'absolute', left: '10px', top: '620px'}}\n              onClick={()=>switchBackground((backId + 1) % back.length)}>Background</button>\n    </div>\n  );\n}\n","/*\n * SpacetimeQ Calendar, v0.1\n * Card-type UI (Êú≠Âûã„Ç´„É¨„É≥„ÉÄ„Éº)\n */\n\nimport React, { useState, useReducer } from 'react';\n//import { temp2Hue } from './WeatherUtil';\nimport './App.scss';  // Once tried CSS-in-JS emotion v10 but canceled due to the performance issue\nimport sekki from './sekki.json';\nimport { getPosSun, normB } from './util-cal';\nimport { useWindowSize, getResponsiveGroup, useInterval } from './util-ui';\nimport {\n  vF, round, trunc, abs,\n  deg360, radians, sin, tan\n} from './util-math';\nimport { BackDrop } from './effects';\n\n(function() { // ASCII ART: http://patorjk.com/software/taag/#p=display&f=Graffiti&t=Type%20Something%20\n  console.log(\"‚ïî‚ïê‚ïó‚îå‚îÄ‚îê‚îå‚îÄ‚îê‚îå‚îÄ‚îê‚îå‚îÄ‚îê‚îå‚î¨‚îê‚î¨‚îå‚î¨‚îê‚îå‚îÄ‚îê‚ïî‚ïê‚ïó  NAVIGATOR v0.1 - contact: dev.spacetimeq@gmail.com\");\n  console.log(\"‚ïö‚ïê‚ïó‚îú‚îÄ‚îò‚îú‚îÄ‚î§‚îÇ  ‚îú‚î§  ‚îÇ ‚îÇ‚îÇ‚îÇ‚îÇ‚îú‚î§ ‚ïë‚ïê‚ï¨‚ïó Calendar started at\", Date());\n  console.log(\"‚ïö‚ïê‚ïù‚î¥  ‚î¥ ‚î¥‚îî‚îÄ‚îò‚îî‚îÄ‚îò ‚î¥ ‚î¥‚î¥ ‚î¥‚îî‚îÄ‚îò‚ïö‚ïê‚ïù‚ïö (C)2019 SpacetimeQ Inc, CA 94583\");\n})();  // IIFE\n\n/*\n * sekki ÁØÄÊ∞ó\n * s24 ‰∫åÂçÅÂõõÁØÄÊ∞ó\n * s72 ‰∏ÉÂçÅ‰∫åÂÄô 24 x 3 arrays of [0:ÂêçÁß∞,1:Ë™≠„Åø,2:ÊÑèÂë≥]\n *   sekki.s72[0..23 ‰∫åÂçÅÂõõÁØÄÊ∞ó(Êò•ÂàÜ..ÂïìËüÑ)][0..2 ÂàùÂÄô,Ê¨°ÂÄô,Êú´ÂÄô][0..2 ÂêçÁß∞,Ë™≠„Åø,ÊÑèÂë≥]\n*/\n// I want to preprocess / compile JavaScript to generate CSS/SASS file.\n\n/*\nconst hue_avg = temp_avg.map(t => temp2Hue(t));\n*/\n\nconst sekki_hue = [\n  150, 115,  87,  141,  69,  57,\n   70,  25,   5,  22,   3,  40,\n   58,  61,  98,  108, 156, 150,\n  161, 198, 237,  205, 182, 188\n];\n\n/*\nconst fetchJSON = (url, cbSetData, cbError) => {\n  // ~/D/nodejs/fileserver$ node server.js\n  fetch(url)\n    .then(response => {\n       const contentType = response.headers.get(\"content-type\");\n       console.log('contentType:', contentType);\n       if (contentType && contentType.includes(\"application/json\"))\n         return response.json();\n       throw new TypeError(\"Oops, no JSON file! \");\n    })  // parses response to JSON\n    .then(cbSetData)\n    .catch(cbError);\n}\n*/\n\n/*\nn sides carousel\ntan(œÄ / n) = (l/2) / r\nr = l / ( 2 tan(œÄ/n) )\n*/\n\n// CSS attributes, Be careful, rotation (0deg) is meaningful!\nconst at_deg = (cmd, v) => `${cmd}(${vF(v)}deg)`;\nconst at_px  = (cmd, v) => `${cmd}(${vF(v)}px)`;\nconst atXY_deg = (cmd, cond, v) => `${cmd + (cond ? 'X' : 'Y')}(${vF(v)}deg)`;\nconst atXY_px  = (cmd, cond, v) => `${cmd + (cond ? 'X' : 'Y')}(${vF(v)}px)`;\n\n//const sun_pos = getPosSun(new Date( /* '2019-05-21T18:00:00' */ ));  // { longitue, distance }\n//console.log(\"Sun position:\", sun_pos);\n\nconst getPosSunDEBUG = (msg=\"\") => {\n  const pos = getPosSun(/* new Date( '2019-05-21T18:00:00' ) */);\n  console.log((new Date()).toLocaleString(), `sun(${msg}):`, pos);\n  return pos;\n}\n\n// There exist two coordinate systems: Carousel-centered and Cell-centered\n// =======================================================================\n// Carousel-centered Coord.\n// -----------------------------------------------------------------------\n// X: tilt\n// Y: rotation\n// Z: 0 horizontal (left to right), 90deg vertical (to be a top to bottom order)\n// =======================================================================\n// Cell(Card)-centered Coord.\n// -----------------------------------------------------------------------\n// x: card face view angle (normal) should be adjusted wrt the Carousel tilt\n// y: side flip\n// z: rotate\n\nconst MODES = [\n  \"TABLE\",\n  \"CAROUSEL\"\n];\n\nconst Card3D = props => {\n\n  const initState = {  // default values\n    mode  : 0,      // 0: TABLE, 1: CAROUSEL\n    horiz : true,   // Horizontal or Vertical when Carousel mode\n    heat  : true,   // heatmap\n    zoom  : false,  // zoom on active card\n    emoji : false,  // show emoji\n    persp : 800,    // perspective\n    tilto : -23.44, // axial tilt, obliquity (angle between rotational axis and its orbital axis)\n    roti  : 0,      // rotation of the current cell index (that should come to the forefront)\n    croty : 0,      // Card Rotation Y\n    scale : 1.5,    // when in zoom on\n    opact : .8,     // opacity\n  };\n\n  const [state, dispatch] = useReducer(reducer, initState);\n\n  // Single Source of Truth\n  // centralise the state handling logic, works in a similar way to Redux, but handles state on a local level.\n  function reducer(state, action) {\n\n    // toggle of the property between two values\n    const toggle = (p, v1, v2) => (p !== v1) ? v1 : v2;\n\n    // Generalized toggle (rotation) function in a sequence of values (array)\n    const toggleSeq = (p, seq) => {  // arrow function should be defined inside not to occur Uncaught TypeError\n      let id = seq.indexOf(p);\n      id = (id < 0) ? 0 : (id + 1) % seq.length;\n      return seq[id];\n    }\n\n    switch (action.type) { // Actions are payloads of information that send data from the application to the store.\n      case 'reset':    return { ...initState, mode: state.mode };  // reset except mode (keep current mode)\n      // 0: Grid 1: Carousel 2: Helix\n      case 'togMode':  return { ...state, mode:  (state.mode + 1) % MODES.length };\n      case 'togHoriz': return { ...state, horiz: !state.horiz   };\n      case 'togHeat':  return { ...state, heat:  !state.heat    };\n      case 'togEmoji': return { ...state, emoji: !state.emoji   };\n      case 'togZoom':  return { ...state, zoom:  !state.zoom    };\n      case 'setZoom':  return { ...state, zoom:  action.payload };\n      // tilt of the carousel, (card rotation X when horiz)\n      case 'chgTilt':  return { ...state, tilto: state.tilto + action.payload };  // change amount\n      case 'togTilt':  return { ...state, tilto: toggleSeq(state.tilto, [0, -23.44, -60, -89]) };\n      // Card Rotation Y\n      case 'chgRoti':  return { ...state, roti:  state.roti + action.payload };\n      case 'setRoti':  return { ...state, roti:  action.payload };\n      // scale of the active card\n      case 'chgScale': return { ...state, scale: state.scale + action.payload };\n      case 'togScale': return { ...state, scale: toggle(state.scale, initState.scale, 5) };\n      // perspective\n      case 'togPersp': return { ...state, persp: toggleSeq(state.persp, [0, 100, 300, 600, 800, 1500, 4000]) };\n      // opacity\n      case 'chgOpact': return { ...state, opact: state.opact + action.payload };\n      case 'togOpact': return { ...state, opact: toggleSeq(state.opact, [0, .4, .8, 1]) };\n      // card rotation (Y when horiz)\n      case 'togCRotY': return { ...state, croty: toggleSeq(state.croty, [0, 45, 90]) };\n\n      default: throw new Error('Unexpected action');\n    }\n  }\n\n  const [sunLon, setSunLon] = useState(() => getPosSunDEBUG(\"init\").longitude);  // sun's longitude,\n  // ‚úÖ Lazy initial state: By passing function to the useState(), only called during the first render\n\n  // carousel properties\n  const cell_n  = props.items.length;          // number of cells\n\n  // derived properties for calculations\n  const bCrs     = (state.mode === 1);        // Don't need to be a funciton.\n  const tilt     = state.horiz ? state.tilto : -state.tilto; // reverse sign when vertical mode (to lean on the right side)\n  const cell_n_2 = cell_n / 2;              // mid point\n  const d_cell   = deg360 / cell_n;            // angle width per each cell (card)\n  const d_cell_2 = d_cell / 2;                 // half angle, center position of each cell\n  const cell_s   = state.horiz ? props.cellWidth : props.cellHeight;  // offsetWidth\n  const crs_r    = round( cell_s / ( 2 * tan(Math.PI / cell_n) ) );   // carousel radius\n  // the adjustment of (rotation - .5) should be applied since the cell was center aligned\n  // Do not normalize the rotation degree to find the shortest path\n  const roty_crs = Number.parseFloat( (sunLon + (state.roti - .5) * d_cell).toFixed(2) ); // carousel's rotation degree\n  //const rot_i   = deg => trunc( ( normB(deg + d_cell_2) / d_cell ) );\n  const i_ff    = trunc( ( normB(roty_crs + d_cell_2) / d_cell ) ); // index of the forefront cell in range [0, cell_n]\n  const dr_tilt = round( abs(sin(tilt * radians) * cell_s * .6) );  // expand crs_r not to be folded due to the tilt\n\n  // layout\n  const cols_table = cell_n / 6;  // columns in table mode\n  const table_adj  = -2.5;  // table position adjustment (in cell width + margin unit)\n  const yomi_min   = 90; // minimum width in px of the cell to show the yomi\n\n  //*********************************** DEBUG OUTPUT\n  //console.log(\"cell_s\", cell_s, \"roty_crs:\", roty_crs, \"crs_r\", crs_r, \"dr_tilt:\", dr_tilt,\n  //            \"rotation:\", state.roti, \"i_ff:\", i_ff);\n  //*********************************** DEBUG OUTPUT\n\n  // define dimensions, positions, and perspective\n  const sceneStyle = {\n    width:  props.cellWidth,\n    height: props.cellHeight,\n    '--pp': state.persp + 'px',\n    '--cell_op': state.opact    // define CSS variables at the higher level DOM tree\n  };\n\n  // Encode rotation or Decode rotation of the carousel\n  const carouselStyle = {\n    //lineHeight: Math.round(props.cellHeight) + 'px',\n    transform: at_px('translateZ', -crs_r)         +\n               ( !state.horiz ? ' rotateZ(90deg)' : '' ) +\n               at_deg(' rotateX', tilt)            +\n               at_deg(' rotateY', -roty_crs)  // sun's location counted in\n  };\n\n  // make it free from the carousel's rotation, so as to be parallel to the screen (Reverse rotation)\n  const innerFrontFacingStyle = {  // apply in the reverse order to that of the carousel\n    '--sun_r': vF(cell_s/8) + 'px',\n    transform: at_deg( 'rotateY', roty_crs) +\n               at_deg(' rotateX', -tilt)   +\n               ( !state.horiz ? ' rotateZ(-90deg)' : '' )  // adding translateZ here causes weird transition\n  };\n\n  // Precalculate this part out of the cell loop for performance, ENVIRONMENT (independent of cell id)\n  const precalc_cell = (zff=false) =>\n    bCrs ?\n      at_px( ' translateZ', crs_r + (zff ? dr_tilt + 80 : dr_tilt) ) +\n      ( !state.horiz ? ` rotateZ(-90deg)`                             : '' ) + // vertical mode: apply before tilt and cardRot\n      ( tilt         ? atXY_deg(' rotate',  state.horiz, -tilt)       : '' ) + // cardRotX is not used as a control variable,\n      ( state.croty  ? atXY_deg(' rotate', !state.horiz, state.croty) : '' ) + // totally linked to on the tilt.x\n      ( zff          ? ` scale3d(${state.scale},${state.scale},${state.scale})` : '' )\n    : // modes.TABLE\n    ( zff ? ` translateZ(100px) scale(${state.scale})` : '' );\n\n  // Initialize either cases, out of the loop\n  const trans_cell_ENV     = precalc_cell();\n  const trans_cell_ENV_zff = state.zoom ? precalc_cell(true) : '';  // No need to calculate when zoomOff\n\n  // Cell coord. arrage the cells relative to the Carousel coord. \n  // To show the cell stand on the right angle we need to adjust the forefront cell's rotateY angle.\n  // But for optimization, let's make this be independent on the Sun's location (that is already counted in\n  // the Carousel coord.)\n  const transformCell = i =>\n    ( bCrs ?  // Cell coord.\n      at_deg('rotateY', i * d_cell) :\n  // table layout: columns for horiz (rows for vert), margin ratio\n      atXY_px( 'translate',  state.horiz, ( table_adj +      (i % cols_table) ) * (props.cellWidth  * 1.2) ) +\n      atXY_px(' translate', !state.horiz, ( table_adj + trunc(i / cols_table) ) * (props.cellHeight * 1.2) )\n    ) +\n  // common, precalculated transforms\n    ( ( state.zoom && (i === i_ff) ) ? trans_cell_ENV_zff : trans_cell_ENV );\n\n  // Optimize not to repeat the same portion of each cell\n  // STEP 1. Build a template (out of the cell loop that is not dependent on i):\n  // `rotateY(${i*15}deg) translateZ(388px) rotateX(23.5deg)`   -> should run only once per rendering\n  // STEP 2. Generate string from the template with each cell\n  /*****************************************************************\n   * Cell Loop\n   *****************************************************************/\n  const crsCell = (item, i) => {  // Render each cell(card)\n    \n    const forefront = (i === i_ff);  // check if i is the index of the forefront cell\n\n    // get the index difference for the shortest path\n    // index: 0..(cell_n-1), output range should be [-m,+m], can be negative, meaning opposite rotational direction\n    // shorter form is 50%~80% fater: for 2400 M calculations, it took 4.6 sec (using abs form) and 8.6 (if cond. form)\n    // Oops! It was WRONG.  (m = cell_n/2) => ( m - abs(m - (i - i_ff)))\n    const shortest_ipath = ( () => {\n      let d = i - i_ff;     // if (abs(d) > m)  d += -sign(d) * cell_n;\n      if (d < -cell_n_2)\n        d += cell_n;\n      else if (d > cell_n_2)\n        d -= cell_n;\n      return d;\n    } )();  // IIFE\n\n    /*\n    // distance between two points in:0..23, out:0..12 when cell_n=24, then normalize 1..0\n    const proximity = bCrs\n                    ? 1 - ( abs(shortest_ipath) * cos(tilt * radians) * 2 / cell_n )\n                    : 1;\n    const proximity_range = (v_min, v_max) => v_min + round( (v_max - v_min) * proximity );\n    */\n\n    const onCardClick = () => {\n      if (forefront)\n        dispatch({type: 'togZoom'})   // toggle zoom when forefront\n      else {\n        if (!state.zoom)\n          dispatch({type: 'togZoom'})   // when clicked, bring it to the forefront and zoom it always\n        dispatch({type: 'setRoti', payload: state.roti + shortest_ipath}); // rotate to the clicked card via the shortest path\n      }\n    }\n\n    const classSfx = !state.horiz ? \"_v\" : \"\";\n\n    // ‰∫åÂçÅÂõõÁØÄÊ∞ócard\n    // ‰∏ÉÂçÅ‰∫åÂÄô 3 per each sekki card„ÄÅË™≠„Åø[1],ÂêçÁß∞[0]\n    return (\n      <div key={i} className={\"crs_cell\" + ( forefront ? \" shadow_ff\" : \"\" )}\n           style={{  // cell style\n             transform   : transformCell(i),\n             //backfaceVisibility: forefront(i) ? 'hidden' : 'visible',\n             zIndex      : forefront && 1000,  // undefined will not be copied\n             //'--cell_cl' : proximity_range(64, 255), // color value (0..255) according to the distance from the ff cell\n           }}\n           onClick={()=>onCardClick()}\n      >\n        <div className={\"sekki-name\" + classSfx}\n          style={{\n            background: 'hsla(' +\n              (state.heat ? (props.hue[i % props.hue.length] + ',100') : '0,0') + '%,50%,' + state.opact + ')'\n            //proximity_range(10, 50) + '%,' + state.opact + ')'\n          }}\n        >\n          {item}\n          {state.emoji && <span className=\"sekki-emoji\" role=\"img\" aria-label=\"emoji\">{sekki.s24emoji[i]}</span>}\n        </div>\n        <div>\n          {sekki.s72[i].map((s, j) =>\n            <div key={j} className={\"s72-names\" + classSfx}>\n              {(cell_s > yomi_min) && <span className=\"s72-yomi\">{s[1]}</span>}\n              <br/>\n              {s[0]}\n            </div>)}\n        </div>\n      </div>\n    );\n  }\n\n  /*\n  const intervalRef = useRef();  // generic container whose current property is mutable\n  useEffect( () => {\n    const id = setInterval( () => {\n      setSunLon(getPosSunDEBUG(id).longitude);  // You know, sunLon doesn't change here yet.\n    }, 60*1000);  // every minute update sun's position and rerender\n    intervalRef.current = id;\n    console.log(\"useEffect()\", id);\n    return () => clearInterval(intervalRef.current);\n  }, []);  // dependency list, [] fire only at the start\n  */\n\n  useInterval(() => {\n      if (bCrs)\n        setSunLon(getPosSunDEBUG().longitude);  // You know, sunLon doesn't change here yet.\n    }, 60*1000);  // every minute update sun's position and rerender\n\n  /*\n  const handleKeyDown = ev => {\n    console.log(ev);\n    if (ev.keyCode === 38) {  // up arrow\n      console.log('UP');\n      state.horiz ? incTiltX(1) : incTiltY(1);\n    } else if (ev.keyCode === 40) {  // down arrow\n      console.log('DOWN');\n      state.horiz ? incTiltX(-1) : incTiltY(-1);\n    }\n  }\n\n  const move_xy = (dx, dy) => {\n    const f = a => trunc(a/5);\n    const m = state.horiz ? f(-dy) : f(dx);\n    if (m !== 0)\n      state.horiz ? incTiltX(m) : incTiltY(m);\n    //incTiltY(dy);\n  }\n    <EventMove render={move_xy}>\n          <InnerSpace width={400} height={400} cellHeight={props.cellHeight} />\n  */\n\n  return (\n    <>\n      <ControlCrs state={state} dispatch={dispatch} cell_n={cell_n} />\n      <div className=\"crs_scene\" style={sceneStyle}>\n        <div className=\"crs_body\" style={bCrs ? carouselStyle : undefined}>\n          <div className=\"sun\" style={bCrs ? innerFrontFacingStyle : {opacity: '.1'}}\n              onClick={()=>dispatch({type: 'togHeat'})}\n          />\n          {props.items.map((s24, i) => crsCell(s24, i))}\n        </div>\n      </div>\n    </>\n  );\n}\n\nconst ControlCrs = ({ state, dispatch, cell_n }) => {\n  const degD = 5;  // degree\n  const bCrs = (state.mode === 1);\n\n  return (<div className=\"btn-container\">\n    <TestBtn onClick={()=>dispatch({type: 'reset'})}>Reset({window.innerWidth}x{window.innerHeight})</TestBtn>\n    <TestBtn onClick={()=>dispatch({type: 'togMode'})}>Mode:{MODES[state.mode]}</TestBtn>\n    <TestBtn onClick={()=>dispatch({type: 'togHoriz'})}>{state.horiz ? 'Horizontal' : 'Vertical'}</TestBtn>\n    <TestBtn disabled={!bCrs}\n             onClick={()=>dispatch({type: 'togPersp'})}>Perspective={state.persp}px</TestBtn>\n    <TestBtn onClick={()=>dispatch({type: 'togHeat'})}>{state.heat ? 'Heatmap' : 'No Color'}</TestBtn>\n    <TestBtn onClick={()=>dispatch({type: 'togZoom'})}>{state.zoom ? 'Zoom On' : 'Zoom Off'}</TestBtn>\n    <TestBtn onClick={()=>dispatch({type: 'togEmoji'})}>{state.emoji ? 'emoji' : 'No emoji'}</TestBtn>\n    <TestBtn disabled={state.roti === 0}\n             onClick={()=>dispatch({type: 'setRoti', payload: 0})}>Rotate(Today)</TestBtn>\n    <TestBtn onClick={()=>dispatch({type: 'chgRoti', payload: cell_n/4})}>Rotate(90¬∞)</TestBtn>\n    <TestBtn onClick={()=>dispatch({type: 'chgRoti', payload:  1})}>Rotate(+)</TestBtn>\n    <TestBtn onClick={()=>dispatch({type: 'chgRoti', payload: -1})}>Rotate(-)</TestBtn>\n    <TestBtn disabled={!bCrs}\n             onClick={()=>dispatch({type: 'togTilt'})}>Toggle Tilt={vF(state.tilto)}¬∞</TestBtn>\n    <TestBtn disabled={!bCrs}\n             onClick={()=>dispatch({type: 'chgTilt', payload:  degD})}>Tilt(+{degD}¬∞)</TestBtn>\n    <TestBtn disabled={!bCrs}\n             onClick={()=>dispatch({type: 'chgTilt', payload: -degD})}>Tilt(-{degD}¬∞)</TestBtn>\n    <TestBtn disabled={!state.zoom}\n             onClick={()=>dispatch({type: 'togScale'})}>Scale=x{state.scale}</TestBtn>\n    <TestBtn disabled={!state.zoom}\n             onClick={()=>dispatch({type: 'chgScale', payload:  .5})}>Scale(+)</TestBtn>\n    <TestBtn disabled={!state.zoom || state.scale <= .5}\n             onClick={()=>dispatch({type: 'chgScale', payload: -.5})}>Scale(-)</TestBtn>\n    <TestBtn disabled={state.mode === 0}\n             onClick={()=>dispatch({type: 'togCRotY'})}>Card Y={state.croty}¬∞</TestBtn>\n    <TestBtn onClick={()=>dispatch({type: 'togOpact'})}>Opacity={vF(state.opact,1)}</TestBtn>\n    <TestBtn disabled={state.opact >= 1}\n             onClick={()=>dispatch({type: 'chgOpact', payload:  .1})}>Opacity(+.1)</TestBtn>\n    <TestBtn disabled={state.opact <= 0}\n             onClick={()=>dispatch({type: 'chgOpact', payload: -.1})}>Opacity(-.1)</TestBtn>\n    <input type=\"date\" placeholder=\"\" />\n  </div>);\n}\n\n/*\n            <span role=\"img\" aria-label=\"Earth-Asia\">üåè</span>\n          </div>\n * SVG elements are 2D objects like an image. By putting the SVG element on the CSS 3D space,\n * we can let the CSS engine handle the 3D transformations.\n * 04/29/2019 It does not work for the Firefox. -> Solution: { transform-style: preserve-3d }\n  //\n//  vectorEffect=\"non-scaling-stroke\"\n\nconst InnerSpace = React.memo(function InnerSpace(props) {\n  const { width, height, cellHeight, opacity, ...other } = props;\n\n  console.log(\"InnerSpace\");\n  return (\n    // transformStyle is required for Firefox\n    <div className=\"inner-space\" style={{\n        '--in_left': -width / 2 + 'px',\n        '--in_top': (-height + cellHeight) / 2 + 'px'\n      }}\n      {...other} >\n      {lns}\n    </div>\n  );\n});\n*/\n\n/*\n// https://reactjs.org/docs/react-api.html#reactpurecomponent\n// Be careful for the props changes that would make no use of React.memo().\nconst InnerSpace = React.memo(function InnerSpace(props) {\n  const { width, height, cellHeight, ...other } = props;\n\n  const Svg = props =>\n    <svg viewBox=\"-100 -100 200 200\" width={width + 'px'} height={height + 'px'}\n      style={{\n        transform: props.rotate,\n        opacity: .8\n      }}\n    >\n      {props.children}\n    </svg>;\n\n  const DemoSvg = props => {\n    const {r, color} = props;\n    //const q = r+2;\n    // <path fill=\"red\"     d={`M${q},${q}L${q},${-q}L${-q},${-q}L${-q},${q}z`} />\n    return (<g fillOpacity=\".1\" strokeOpacity=\".5\" strokeWidth=\"2\" stroke={color} >\n        <path fill=\"fuchsia\" d={`M${r},${r}L${r},${-r}L${-r},${-r}L${-r},${r}z`} />\n        <path fill=\"none\" d={`M${r},${r}L${r},${-r}M${r},${r}L${-r},${-r}`} />\n      </g>\n    );\n  }\n  // <circle cx=\"0\" cy=\"0\" r=\"10\" stroke=\"orange\" fill=\"yellow\" opacity={opacity} strokeWidth=\"1\" />\n\n  const Cvs = props => {\n    const canvasRef = React.useRef(null);\n\n    React.useEffect(() => {\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext('2d');\n\n      ctx.lineWidth = 4;\n      ctx.strokeStyle = 'red';\n      ctx.fillStyle = props.fill;\n      ctx.fillRect(0, 0, width, height);\n      ctx.rect(0, 0, width, height);\n      ctx.stroke();\n    }, []);\n\n    return <canvas id={props.id} ref={canvasRef} width={width} height={height}\n      style={{\n        transformStyle: 'preserve-3d',\n        position: 'absolute',\n        transform: props.rotate,\n        opacity: .4\n      }} />;\n  }\n\n  const lns = [];\n  const N = 5;  // N * 4 of <svg> and <canvas> elements will be created\n  const da = 180/N;\n  for (let i=0; i < N; i++) {\n    lns.push( <Svg key={i * 4}     rotate={`rotateX(${i * da}deg)`}><DemoSvg r={100} color=\"#0ff\"   /></Svg> );\n    lns.push( <Svg key={i * 4 + 1} rotate={`rotateY(${i * da}deg)`}><DemoSvg r={100} color=\"orange\" /></Svg> );\n    lns.push( <Cvs key={i * 4 + 2} id={`cvs_${i}X`} rotate={`rotateX(${(i + .5) * da}deg)`} fill=\"blue\"   /> );\n    lns.push( <Cvs key={i * 4 + 3} id={`cvs_${i}Y`} rotate={`rotateY(${(i + .5) * da}deg)`} fill=\"green\" /> );\n  }\n\n  console.log(\"InnerSpace\", props);\n  return (\n    // transformStyle is required for Firefox\n    <div className=\"inner-space\" style={{\n        '--in_left': -width / 2 + 'px',\n        '--in_top': (-height + cellHeight) / 2 + 'px'\n      }}\n      {...other} >\n      {lns}\n    </div>\n  );\n});\n*/\n\nconst TestBtn = props => <button className=\"test-btn\" {...props}>{props.children}</button>;\n\nconst App = () => {\n  const ws = useWindowSize();\n  const mw = [600, 900, 1200, 1800, 2400];  // maximum width to cover the group\n  const mh = trunc( ws.h / 100 + 1) * 100;  // step, not to change too frequently\n  const gr = getResponsiveGroup(ws.w);\n  const cell_w = round(mw[gr]/12);  // w/10\n  const cell_h = round(cell_w * 1.1);\n\n  /*\n  const items = [];\n  for (let i=0; i < N; i++) {\n    items.push(1+i);\n  }\n  */\n\n  return (\n    <div className=\"App\" style={{height: ws.h + 'px'}}>\n      <BackDrop width={mw[gr]} height={mh} />\n      <Card3D items={sekki.s24} hue={sekki_hue} cellWidth={cell_w} cellHeight={cell_h} />\n      <DebugOut row={0} color=\"yellow\">SpacetimeQ: Debug Version</DebugOut>\n      <DebugOut row={1} color=\"white\">{ws.w}&nbsp;x&nbsp;{ws.h}&nbsp;({gr})</DebugOut>\n    </div>\n  ); // sekki.s24\n}\n\nconst DebugOut = props =>\n  <p className=\"debug-out\" style={{ top: props.row * 20 + 'px', color: props.color }}>\n    {props.children}\n  </p>;\n\nexport default App;\n\n  /*\n  var style = (function() {\n      // Create the <style> tag\n      var style = document.createElement(\"style\");\n      // WebKit hack\n      style.appendChild(document.createTextNode(\"\"));\n      // Add the <style> element to the page\n      document.head.appendChild(style);\n      return style;\n  })();\n  style.sheet.insertRule(`@keyframes solar-term-rotate { from { transform: translateZ(${zoom}px) rotateX(${tilt}deg) rotateY(360deg)} }`, 0);\n  console.log(\"style.sheet.insertRule()\");\n\n// Direct DOM access test\n  const handleRotate = () => {\n    document.querySelector(\".crs_body\").style.cssText = \"transform: translateZ(-312px) rotateX(-15.44deg) rotateY(-500.0deg);\"\n  }\n\n      <button style={{position: 'absolute', left: '10px', top: '660px'}}\n              onClick={()=>handleRotate()}>Rotate</button>\n*/\n","// util-ui.js\nimport React, { useState, useEffect, useRef } from 'react';\n\n/* Binary Search for the Range (At list 2 if-checks, maximum 3 if-checks)\n *|    w < 900    |         else            -> comparison (1)\n *+-------+-------+-------+-------+--------\n *|w<600  | else  |w<1200 |      else       -> comparison (2)\n *|       |       |       |-------+--------\n *|       |       |       |w<1800 |  else   -> comparison (3)\n *+----------------------------------------\n *|  [0]  |  [1]  |  [2]  |  [3]  |  [4]    Responsive Range Group in my application\n *+-------+-------+-------+-------+--------\n *|       |600px  |900px  |1200px |1800px   : media query breakpoints\n *|       |       |       |       |\n *|       |       |       |       +--[4] big-desktop-up\n *|       |       |       +--[3] desktop-up\n *|       |       +--[2] tablet-landscape-up\n *|       +--[1] tablet-portrait-up\n *+--[0] phone-only\n*/\nexport const getResponsiveGroup = w => {\n  if (w < 900)\n    return (w < 600) ? 0 : 1;\n  if (w < 1200)\n    return 2;\n  return (w < 1800) ? 3 : 4;\n}\n\n// reacts only to the width change\nexport const useWindowWidth = () => {\n  const [winWidth, setWinWidth] = useState(window.innerWidth);\n\n  const handleWindowResize = () => {\n    setWinWidth(window.innerWidth);\n  }\n\n  useEffect(() => {\n    window.addEventListener('resize', handleWindowResize);\n    return () => window.removeEventListener('resize', handleWindowResize);\n  }, []);\n\n  return winWidth;\n}\n\n// reacts to both width and height changes\n// aspect ration = w / h; Portrait (asp <= 1) Landscape (asp > 1)\nexport const useWindowSize = () => {\n  const [winSize, setWinSize] = useState({\n    w: window.innerWidth,\n    h: window.innerHeight\n  });\n\n  const handleWindowResize = () => setWinSize({\n    w: window.innerWidth,\n    h: window.innerHeight\n  });\n\n  useEffect(() => {\n    window.addEventListener('resize', handleWindowResize);\n    return () => window.removeEventListener('resize', handleWindowResize);\n  }, []);\n\n  return winSize;\n}\n/*\n// Usage\nfunction App() {\n  // Call our hook for each key that we'd like to monitor\n  const happyPress = useKeyPress('h');\n  const sadPress = useKeyPress('s');\n  const robotPress = useKeyPress('r');\n  const foxPress = useKeyPress('f');\n\n  return (\n    <div>\n      <div>h, s, r, f</div>\n      <div>\n        {happyPress && 'üòä'}\n        {sadPress && 'üò¢'}\n        {robotPress && 'ü§ñ'}\n        {foxPress && 'ü¶ä'}\n      </div>\n    </div>\n  );\n}\n*/\n\n// Hook\n// left, up, right, down = 37, 38, 39, 40\nexport function useKeyPress(targetKey) {\n  // State for keeping track of whether key is pressed\n  const [keyPressed, setKeyPressed] = useState(false);\n\n  // If pressed key is our target key then set to true\n  function downHandler({ key }) {\n    if (key === targetKey) {\n      setKeyPressed(true);\n    }\n  }\n\n  // If released key is our target key then set to false\n  const upHandler = ({ key }) => {\n    if (key === targetKey) {\n      setKeyPressed(false);\n    }\n  };\n\n  // Add event listeners\n  useEffect(() => {\n    window.addEventListener('keydown', downHandler);\n    window.addEventListener('keyup', upHandler);\n    // Remove event listeners on cleanup\n    return () => {\n      window.removeEventListener('keydown', downHandler);\n      window.removeEventListener('keyup', upHandler);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // Empty array ensures that effect is only run on mount and unmount\n\n  return keyPressed;\n}\n\n// Mouse / TrackPad Event Handlers Wrapper\n// props.render should be provided, that handles changed x, y position\nexport const EventMove = props => {\n  const [mousedown,  setMouseDown] = useState(false);\n  const [mouse,      setMouse]     = useState({x: 0, y: 0});\n\n  const _moveStart = ev => {\n    const p = (ev.type === 'touchstart') ?\n      {x: ev.touches[0].pageX,\n       y: ev.touches[0].pageY} :\n      {x: ev.clientX,\n       y: ev.clientY};\n    setMouseDown(true);\n    setMouse(p);\n  }\n\n  const _move = ev => {\n    if (mousedown) {\n      const p = (ev.type === 'touchmove') ?\n        {x: ev.touches[0].pageX,\n         y: ev.touches[0].pageY} :\n        {x: ev.clientX,\n         y: ev.clientY};\n      props.render(p.x - mouse.x, p.y - mouse.y);  // Render Props\n      setMouse(p);\n    }\n  }\n\n  const _moveEnd = () => { setMouseDown(false); }\n    \n  const handleMouseDown = ev => { _moveStart(ev); }\n  const handleMouseMove = ev => { _move(ev); }\n  const handleMouseUp   = ev => { _moveEnd(); }\n\n  const handleTouchStart = ev => {\n    ev.preventDefault();\n    ev.stopPropagation();\n    _moveStart(ev);\n  }\n\n  const handleTouchMove = ev => {\n    ev.preventDefault();\n    ev.stopPropagation();  // seems not working\n    ev.nativeEvent.stopImmediatePropagation();\n    _move(ev);\n  }\n  const handleTouchEnd = () => {\n    _moveEnd();\n  }\n\n  return (\n    <div\n      onMouseUp    = {handleMouseUp}\n      onMouseMove  = {handleMouseMove}\n      onMouseDown  = {handleMouseDown}\n      onTouchStart = {handleTouchStart}\n      onTouchMove  = {handleTouchMove}\n      onTouchEnd   = {handleTouchEnd}\n    >\n      {props.children}\n    </div>\n  );\n}\n\n// https://overreacted.io/making-setinterval-declarative-with-react-hooks/\nexport function useInterval(callback, delay) {\n  const savedCallback = useRef();\n\n  // Remember the latest callback\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n\n// 05/10/2019 by Soomin\n// Idle time CPU usage: 2% WTH?\nexport function useAnimationFrame(callback, delay) {\n  const savedCallback = useRef();\n  // const [lastTs, setLastTs] = useState(0);  // lastTs remained 0 in the tick loop even though setLastTs(ts) called.\n  const lastTs = useRef(0);  // returned object will persist for the full lifetime of the component\n\n  // Remember the latest callback\n  useEffect(() => {\n    //console.log(callback);\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval\n  useEffect(() => {\n    let frameId;\n\n    const tick = ts => {  // loop called repeatedly by rAF\n      if (ts - lastTs.current >= delay) {\n        //console.log(ts, lastTs.current, ts - lastTs.current);\n        lastTs.current = ts;\n        savedCallback.current();\n      }\n      frameId = requestAnimationFrame(tick);\n    }\n    tick(0);  // called once at the start\n    return () => cancelAnimationFrame(frameId);\n  }, [delay]);\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconst rootEl = document.getElementById('root');\nReactDOM.render(<App />, rootEl);\n\nif (module.hot) {\n  module.hot.accept('./App', () => {\n    const NextApp = require('./App').default\n    ReactDOM.render(\n      <NextApp />,\n      rootEl\n    )\n  })\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}