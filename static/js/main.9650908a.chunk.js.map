{"version":3,"sources":["util-cal.js","util-math.js","test-btn.js","App.js","util-ui.js","serviceWorker.js","index.js"],"names":["getJulianDay","date","getTime","norm_N","N","v","π","Math","PI","radians","abs","sin","cos","tan","round","sign","sqrt","pow","log","min","max","trunc","TBtn","props","Object","core_browser_esm","assign","css","left","top","borderRadius","backgroundColor","border","color","padding","font","fontWeight","textAlign","textDecoration","display","fontSize","margin","&: disabled, &[disabled]","children","TBtnContainer","flexDirection","flexWrap","alignItems","marginLeft","paddingTop","sekki_hue","modes","sun_pos","n","L","g","longitude","distance","getPosSun","Date","console","vF","p","arguments","length","undefined","Number","isInteger","parseFloat","toFixed","at_deg","cmd","concat","at_px","Card3D","def","mode","tilt","x","y","scale","opacity","perspect","_React$useState","React","useState","_React$useState2","slicedToArray","setMode","_React$useState3","_React$useState4","setPerspect","_React$useState5","_React$useState6","horiz","toggleHorizontal","_React$useState7","_React$useState8","heat","toggleHeat","_React$useState9","_React$useState10","zoomCard","toggleZoomCard","_React$useState11","_React$useState12","rotation","setRotation","_React$useState13","_React$useState14","setTilt","_React$useState15","_React$useState16","setScale","_React$useState17","_React$useState18","cardRotY","setCardRotY","_React$useState19","_React$useState20","setOpacity","setTiltX","setTiltY","incTiltX","dx","incTiltY","dy","isCarousel","getTilt","cell_n","items","deg_n","cell_s","cellWidth","cellHeight","crs_r","rot_deg","nr","rot_crs","rot_i","deg","i_today","i_ff","elev","forefront","i","shortest_dist","m","d","proximity_range","v_min","v_max","sceneStyle","position","perspective","width","height","zIndex","marginTop","carouselStyle","transformStyle","transition","background","transform","innerSpaceStyle","sun_r","boxShadow","&:hover","crsCell","clr","crsCellStyle","trans","isToday","cols","transformCell","sekkiNameStyle","objectSpread","cursor","textShadow","hue","float","writingMode","s72NamesStyle","fr","r","lineHeight","whiteSpace","& .s72-yomi","paddingBottom","s72col","j","className","sekki","s72","key","onClick","s24","lnsCrsCells","forEach","nm","push","react_default","a","Fragment","test_btn_TBtnContainer","test_btn_TBtn","disabled","App","w","window","innerWidth","winWidth","setWinWidth","handleWindowResize","useEffect","addEventListener","removeEventListener","useWindowWidth","cell_w","cell_h","fontFamily","App_Card3D","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","error","rootEl","document","getElementById","ReactDOM","render","createElement","src_App","URL","process","href","origin","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.9650908a.chunk.js","sourcesContent":["// SpacetimeQ CalUtil, by Soomin K.\n//\nimport Names from './names.json';\n\n// Check if the given year is a leap year in the Gregorian calendar\nexport const IsLeapYear = y =>\n  ((y % 4   === 0) &&\n   (y % 100 !== 0)) ||\n   (y % 400 === 0);\n\n// const DaysInMonth = (m, y) => new Date(y, m, 0).getDate();\n// m: 1..12\n// Gregorian Calendar: Sep. 1752 -> 1,2,14,...30 (11 days advanced)\nexport const DaysInMonth = (m, y) => {\n  switch (m) {\n    case 4:\n    case 6:\n    case 9:\n    case 11: return 30;\n    case 2:  return IsLeapYear(y) ? 29 : 28;\n    default: return 31;\n  }\n}\n\n// Count the number of days with the year up to the specified date\n// m starts from 1\nexport const NthDayInYear = (yr, m, d) => {\n  // For the optimized performance, avoid the loop and use the pre-calculated array\n  // of accumulated days until the month (not a leap year)\n  const accDays = [\n    0,\n    31,\n    31+28,\n    31+28+31,\n    31+28+31+30,\n    31+28+31+30+31,\n    31+28+31+30+31+30,\n    31+28+31+30+31+30+31,\n    31+28+31+30+31+30+31+31,\n    31+28+31+30+31+30+31+31+30,\n    31+28+31+30+31+30+31+31+30+31,\n    31+28+31+30+31+30+31+31+30+31+30\n  // 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11 month\n  ];\n  if (m < 1 || m > 12)\n    return 0;  // valid range check\n  let days = accDays[m-1];\n  if (m > 2 && IsLeapYear(yr))\n    days++;\n  return (days + d);\n}\n\n// 元号 from 西暦\nexport const GengoYear = yr => {\n  for (let i = (Names.Gengo.yr.length - 1); i >= 0; i--)\n    if (yr >= Names.Gengo.yr[i])\n      return Names.Gengo.jp[i] + (yr - Names.Gengo.yr[i] + 1);\n  return yr;   // out of range, just return yr\n}\n\nexport const radian = deg => deg * Math.PI / 180;\n\n// get Julian Day Number\n// Invented in 1583 by Joseph Scaliger\n// The 7980 year cycle (solar, lunar, and a particular Roman tax cycle)\n// Jan.1,4713 B.C. at noon GMT ~ Jan.22,3268 at noon GMT\n// The number of days from Jan. 1, 4713 B.C. at 12:00:00 GMT, until Jan. 1, 1970 at 00:00:00 UTC\n// A day is 86,400 seconds long. UNIX TIM / 86400000 is the number of days since Jan. 1, 1970\n// new Date gives you the number of seconds from epoch until whatever loca ltime your computer has\nexport const getJulianDay = date => (date.getTime() / 86400000.0 + 2440587.5);\n\n// SOURCE: https://news.local-group.jp/moonage/moonage.js.txt\nexport const getMoonAge = date => {\n  // 新月日計算\n  // 引数  　julian  ユリウス通日\n  // 戻り値  与えられたユリウス通日に対する直前の新月日(ユリウス日)\n  const getNewMoon = j => {\n    const n1 = 2451550.09765;\n    const n2 = 29.530589;\n    const n3 = 0.017453292519943;\n    const k  = Math.floor((j - n1) / n2);\n    const t  = k / 1236.85;\n\n    return (\n        n1\n      + n2 * k\n      + 0.0001337 * t * t\n      - 0.40720   * Math.sin((201.5643 + 385.8169 * k) * n3)\n      + 0.17241   * Math.sin((2.5534   +  29.1054 * k) * n3)\n    );\n  }\n  \n  const jd = getJulianDay(date);\n  // console.log('Julian: ', jl);\n  let nm = getNewMoon(jd);\n  // getNewMoonは新月直前の日を与えるとうまく計算できないのでその対処\n  // (一日前の日付で再計算してみる)\n  if (nm > jd) {\n    nm = getNewMoon(jd - 1.0);\n  }\n  // console.log('Moon age:', jd - nm);\n  return (jd - nm);  // moon's age at current time\n}\n\n// normalize for any integer N, maps to the positive integer\n// ex) norm_N(360, -270) = 90\nexport const norm_N = (N, v) => ( (v % N) + N ) % N;  // norm_N(360, x), norm_N(24, x)\n/*\n{\nexport const NormalizeDegree = deg => ( (deg % 360) + 360 ) % 360;\n  if (deg >= 0 && deg < 360)  // Don't allow 360, it should be rewinded to 0.\n    return deg;\n  let nd = deg % 360;\n  if (nd < 0)\n    nd += 360;\n  return nd;\n}\n*/\n\n// Position of the Sun: https://en.wikipedia.org/wiki/Position_of_the_Sun\n// Precision: compared to 国立天文台＞暦計算室＞暦象年表\n// 1.26 ~ 15.41 min (0.0106 degree) for 2019年二十四節気 視黄経 (Tested at Dec.6,2018)\nexport const getPosSun = date => {\n  const n = getJulianDay(date) - 2451545.0;\n  // The mean longitude of the Sun, corrected for the aberration of light\n  const L = norm_N(360, 280.460 + 0.9856474*n );  // in degree\n  // The mean anomaly of the Sun\n  const g = radian( 357.528 + 0.9856003*n );  // in radian\n  // The ecliptic longitude of the Sun\n  return {\n    longitude: norm_N(360, L + 1.915*Math.sin(g) + 0.020*Math.sin(2*g) ),\n    distance: 1.00014 - 0.01671*Math.cos(g) - 0.00014*Math.cos(2*g)\n  };\n}\n","// Math definitions: Just for readability\n// https://github.com/d3/d3-geo/blob/master/src/math.js\n\n// consider degeneracy and robustness\n\nexport const τ    = Math.PI*2;\nexport const π    = Math.PI;\nexport const π_2  = Math.PI/2;\nexport const π_4  = Math.PI/4;\nexport const ε    = 1e-6;      // a small threshold value for the floating point computation\nexport const ε2   = 1e-12;\n\nexport const deg360 = 360;         // declare the special degree as the constant, name it.\nexport const deg180 = 180;\nexport const deg90  = 90;\nexport const degrees = deg180 / π;\nexport const radians = π / deg180;\nexport const π_2xdegrees = deg90;  // π/2 x degrees\nexport const abs   = Math.abs;\nexport const sin   = Math.sin;\nexport const cos   = Math.cos;\nexport const tan   = Math.tan;\nexport const sign  = Math.sign;\nexport const sqrt  = Math.sqrt;\nexport const pow   = Math.pow;\nexport const log   = Math.log;\n\nexport const min   = Math.min;\nexport const max   = Math.max;\nexport const round = Math.round;\nexport const trunc = Math.trunc;\n\nexport const zero    = v => abs(v) < ε;        // is virtually zero?\nexport const epsilon = v => zero(v) ? 0 : v;   // reduce an infinitesimal number to zero\n\n// to avoid NaN for the invalid domain ranges\nexport const asin = x => x > 1 ? π/2 : x < -1  ? -π/2 : Math.asin(x);\nexport const acos = x => x > 1 ? 0   : x < -1  ? π    : Math.acos(x);\n\nexport const haversin = x => (x = sin(x/2))*x;\nexport const range = (x, r1, r2) => min(max(x, r1), r2);  // let r1 ≦ x ≦ r2\n","//import React from 'react';\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nexport const TBtn = props =>\n  <button css={{\n      left:            '10px',\n      top:             '10px',\n      borderRadius:    '10%',\n      backgroundColor: 'Gainsboro',\n      border:          '2px solid #4caf50',\n      color:           'black',\n      padding:         '4px 4px',\n      font:            'small \"Courier New\", sans-serif',\n      fontWeight:      'bold',\n      textAlign:       'center',\n      textDecoration:  'none',\n      display:         'inline-block',\n      fontSize:        '10px',\n      margin:          '1px 2px',\n      \"&: disabled, &[disabled]\": {\n        border:          '1px solid olive',\n        backgroundColor: 'darkgray',\n        color:           'SlateGray'\n      }\n    }}\n    {...props}\n  >\n    {props.children}\n  </button>;\n\nexport const TBtnContainer = props =>\n  <div css={{\n    display:       'flex',\n    flexDirection: 'column',\n    flexWrap:      'wrap',\n    alignItems:    'flex-start',\n    marginLeft:    '10px',\n    paddingTop:    '20px'\n  }}\n  {...props}\n  >\n    {props.children}\n  </div>;\n","/*\n * SpacetimeQ Calendar, v0.1\n * Card-type UI (札型カレンダー)\n *\n * =================================================\n * Issues\n * -------------------------------------------------\n * 04/27/2019 'scale3d()' has a quality issue (blurry) for firefox and safai.\n *      'translateZ()' has the same trouble. Only works well for Chrome.\n * 05/02/2019 Why the sun's position in vertical mode does look incorrect? -> Due to the perspective.\n *    - Perspective change through CSS variable doesn't work well in Safari, no screen update,\n *      Updates only when window resize.\n *    - rotateX, rotateY (sun inside Carousel) does not work in Firefox.\n *      The reason was due to missing { transform-style: preserve-3d; } in the parent <div>, not inherited property!\n * 05/03/2019 To solve the blurry font problem: Start with big fonts and layout, and then translateZ(-far away)\n *      But this time, the contracted fonts looks too much crispy.\n *      So we need to find optimized combination of perspective, translateZ, and font-size's.\n *      (https://greensock.com/forums/topic/13905-how-to-fix-text-blurry-in-3d-rotation/)\n */\n\nimport React from 'react';\n//import { temp2Hue } from './WeatherUtil';\n// this comment tells babel to convert jsx to calls to a function called jsx instead of React.createElement\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport sekki from './sekki.json';\nimport { getPosSun, norm_N } from './util-cal';\nimport { useWindowWidth }    from './util-ui';\nimport {\n  round, trunc, abs,\n  deg360, radians, sin, cos, tan\n} from './util-math';\nimport { TBtn, TBtnContainer } from './test-btn';\n\n/*\n * sekki 節気\n * s24 二十四節気\n * s72 七十二候 24 x 3 arrays of [0:名称,1:読み,2:意味]\n *   sekki.s72[0..23 二十四節気(春分..啓蟄)][0..2 初候,次候,末候][0..2 名称,読み,意味]\n*/\n// I want to preprocess / compile JavaScript to generate CSS/SASS file.\n\n/*\nconst hue_avg = temp_avg.map(t => temp2Hue(t));\n*/\n\nconst sekki_hue = [\n  150, 115,  87,  141,  69,  57,\n   70,  25,   5,  22,   3,  40,\n   58,  61,  98,  108, 156, 150,\n  161, 198, 237,  205, 182, 188\n];\n\n/*\nconst fetchJSON = (url, cbSetData, cbError) => {\n  // ~/D/nodejs/fileserver$ node server.js\n  fetch(url)\n    .then(response => {\n       const contentType = response.headers.get(\"content-type\");\n       console.log('contentType:', contentType);\n       if (contentType && contentType.includes(\"application/json\"))\n         return response.json();\n       throw new TypeError(\"Oops, no JSON file! \");\n    })  // parses response to JSON\n    .then(cbSetData)\n    .catch(cbError);\n}\n*/\n\n/*\nn sides carousel\ntan(π / n) = (l/2) / r\nr = l / ( 2 tan(π/n) )\n*/\n\nconst modes = {\n  TABLE    : 0,\n  CAROUSEL : 1\n}\n\nconst sun_pos = getPosSun(new Date());      // today's sun's position {longitude: 0, distance: 0};\nconsole.log(sun_pos);\n\nconst vF = (v, p=3) => Number.isInteger(v) ? v : parseFloat(v.toFixed(p));  // fixed digit number\n\n// CSS attributes, Be careful, rotation (0deg) is meaningful!\nconst at_deg = (cmd, v) => `${cmd}(${vF(v)}deg)`;\nconst at_px  = (cmd, v) => `${cmd}(${vF(v)}px)`;\n\n\n// There exist two coordinate systems: Carousel-centered and Cell-centered\n// =======================================================================\n// Carousel-centered Coord.\n// -----------------------------------------------------------------------\n// X: tilt\n// Y: rotation\n// Z: 0 horizontal (left to right), 90deg vertical (to be a top to bottom order)\n// =======================================================================\n// Cell(Card)-centered Coord.\n// -----------------------------------------------------------------------\n// x: card face view angle (normal) should be adjusted wrt the Carousel tilt\n// y: side flip\n// z: rotate\n\nconst Card3D = props => {\n  const def = {  // default values\n    mode     : modes.TABLE,\n    tilt     : {x: 0, y: 0},  // x: -23.5\n    scale    : 1.5,\n    opacity  : .8,\n    perspect : 800\n  };\n  const [mode,     setMode]          = React.useState(def.mode);     // 0: Grid 1: Carousel 2: Helix\n  const [perspect, setPerspect]      = React.useState(def.perspect); // perspective\n  const [horiz,    toggleHorizontal] = React.useState(true);         // Is horizontal, or vertical carousel\n  const [heat,     toggleHeat]       = React.useState(true);         // Show heatmap?\n  const [zoomCard, toggleZoomCard]   = React.useState(false);        // Zoom in active card?\n  const [rotation, setRotation]      = React.useState(0);            // rotate active (zoom) index\n  const [tilt,     setTilt]          = React.useState(def.tilt);     // tilt of the carousel, rotationX\n  const [scale,    setScale]         = React.useState(def.scale);    // scale of the active card\n  const [cardRotY, setCardRotY]      = React.useState(0);            // card rotation Y\n  const [opacity,  setOpacity]       = React.useState(def.opacity);  // opacity of the carousel\n\n  const setTiltX = x  => setTilt({x: x,      y: tilt.y});\n  const setTiltY = y  => setTilt({x: tilt.x, y: y});\n  const incTiltX = dx => setTiltX(tilt.x + dx);\n  const incTiltY = dy => setTiltY(tilt.y + dy);\n  const isCarousel = () => (mode === modes.CAROUSEL);\n\n  const getTilt = () => horiz ? tilt.x : tilt.y;\n  const cell_n  = props.items.length;          // number of cells\n  const deg_n   = deg360 / cell_n;             // angle per each cell (card)\n  const cell_s  = horiz ? props.cellWidth : props.cellHeight;  // offsetWidth\n  const crs_r   = round( cell_s / ( 2 * tan(Math.PI / cell_n) ) );   // carousel radius\n  const rot_deg = nr => Number.parseFloat( (deg360, sun_pos.longitude + (nr - .5) * deg_n).toFixed(2) );\n  const rot_crs = rot_deg(rotation);    // carousel's rotation angle in degree\n  const rot_i   = deg => trunc( ( norm_N(deg360, deg) / deg_n ) );\n  const i_today = rot_i(rot_deg(0));    // today's index\n  const i_ff    = rot_i(rot_crs);       // index of the forefront cell\n  const elev    = round( abs(sin(getTilt() * radians) * cell_s * .6) );  // elevation for the selected card\n\n  let cardRotX  = 0;    // the adjustment of (rotation - .5) should be applied since the cell was center aligned\n  let yomi_min  = 100;  // minimum width of the cell to show the yomi\n\n  //*********************************** DEBUG OUTPUT\n  console.log(\"cell_s\", cell_s, \"rot_crs:\", rot_crs, \"crs_r\", crs_r, \"elev:\", elev,\n              \"rotation:\", rotation, \"i_ff:\", i_ff, \"i_today:\", i_today);\n  //*********************************** DEBUG OUTPUT\n  \n  const forefront = i => (i === i_ff);  // check if i is the index of the forefront cell\n  const isToday   = i => (i === i_today);\n  // get the index difference for the shortest path\n  // index: 0..(cell_n-1), output range should be -m..+m\n  const shortest_dist = i => {\n    const m = cell_n / 2;  // middle point index\n    let d = i - i_ff;\n    if (d < -m)\n      d = cell_n + d;\n    else if (d > m)\n      d = d - cell_n;\n    return d;\n  }\n\n  // distance between two points in:0..23, out:0..12 then normalize 1..0\n  const proximity_range = (i, v_min, v_max) => (isCarousel()) ?\n    v_min + round( (v_max - v_min) * (1 - (abs(shortest_dist(i)) * cos(getTilt() * radians) / 12) ) ) :\n    v_max;\n\n// 1. position: absolute 2. apply left: 50% 3. margin-left = half of the element width\n  const sceneStyle = {\n    position:    'absolute',\n    left:        '50%',\n    perspective: perspect + 'px',  // distance from the viewer to the object\n    width:       props.cellWidth,\n    height:      props.cellHeight,\n    top:         props.top,\n    zIndex:      props.zIndex,\n    marginTop:   15 + 'vh',\n    border:      '1px dashed rgba(255,255,0,.5)'  // for debug\n  };\n\n  // Encode rotation or Decode rotation of the carousel\n  const carouselStyle = {\n    width:          '100%',\n    height:         '100%',\n    transformStyle: 'preserve-3d',\n    transition:     'transform .3s ease-in',\n    border:         '2px dotted rgba(255,0,255,.5)',  // for debug\n    background:     'rgba(255,0,255,.2)',             // for debug\n    //animation:      'solar-term-rotate 240s linear infinite',\n    //lineHeight: Math.round(props.cellHeight) + 'px',\n    transform: isCarousel() && (\n      at_px('translateZ', -crs_r) +\n      ( horiz ? at_deg(' rotateX', tilt.x) :\n         ' rotateZ(90deg)' + at_deg(' rotateX', tilt.y) ) + at_deg(' rotateY', -rot_crs) )\n  };\n\n  const sun_r  = 6;  // radius of the sun in px\n  const sun_op = .5;\n  \n  const innerSpaceStyle = {\n    transformStyle: 'preserve-3d',\n// To center an elementa\n// 1. position: absolute 2. apply left: 50% 3. margin-left = half of the element width\n    position:     'absolute',\n    left:         '50%',\n    top:          '50%',\n    width:        `${sun_r * 2}px`,\n    height:       `${sun_r * 2}px`,\n    marginLeft:   `${-sun_r}px`,\n    marginTop:    `${-sun_r}px`,\n    borderRadius: '50%',\n    background:   'white',\n    boxShadow:    '0 0 6px 2px #fbe602, 0 0 10px 4px #e70f14, 0 0 14px 6px #fabc14',\n    transition:   'all .5s ease-in',\n  //box-shadow: 0px 0px 5px 6px orange,  // offset-x, offset-y, blur-radius, spread-radius\n//  animation: sun-glow 1s linear infinite alternate,\n    // make it free from the carousel's rotation, so as to be parallel to the screen (Reverse rotation)\n    opacity:      !isCarousel() && .1,\n    transform:    isCarousel() && (\n      at_deg('rotateY', rot_crs) +\n      (horiz ? at_deg(' rotateX', -tilt.x) :\n       at_deg(' rotateX', -tilt.y) + ' rotateZ(-90deg)') ),  // adding translateZ here causes weird transition\n    '&:hover': {\n      boxShadow:\n`0 0 26px 32px rgba(251,230,2,${sun_op}),\\\n 0 0 30px 34px rgba(231,15,20,${sun_op}),\\\n 0 0 44px 48px rgba(250,188,20,${sun_op})`\n    }\n  };\n\n\n  const crsCell = i => {  // Render each cell(card)\n\n    const clr = proximity_range(i, 64, 255);  // color value (0..255) according to the distance from the forefront cell\n    \n    const transformCell = () => {  // Cell coord.\n      let trans;\n      if (isCarousel()) {\n        trans = (zoomCard && forefront(i)) ?\n          // zoom out aligned to the sun's direction only when its current 24-sekki card, otherwise normal to screen\n          at_deg('rotateY', isToday(i) ? i*deg_n : norm_N(deg360, rot_crs) ) +\n          at_px(' translateZ', crs_r + elev + 60) + ` scale(${scale})` :\n          at_deg('rotateY', i*deg_n) + at_px(' translateZ', crs_r + elev);\n        // rotateY: starting longitude of the 24 cells (cards)\n        if (!horiz)\n          trans += ' rotateZ(-90deg)';   // vertical\n      } else {  // modes.TABLE\n        const cols = cell_n / 4;\n        const m_r  = 1.2;  // margin ratio\n        const x = (-2.5 +      (i % cols)) * (props.cellWidth  * m_r);\n        const y = (-1.5 + trunc(i / cols)) * (props.cellHeight * m_r);\n        trans = at_px('translateX', x) + at_px(' translateY', y);\n        if (zoomCard && forefront(i))\n          trans += ` translateZ(100px) scale(${scale})`;\n      }\n      if (cardRotX || tilt.x) trans += at_deg(' rotateX', horiz ? cardRotX - tilt.x : cardRotX);\n      if (cardRotY || tilt.y) trans += at_deg(' rotateY', horiz ? cardRotY : cardRotY - tilt.y);\n      return trans;\n    }\n\n    const crsCellStyle = {\n      position:   'absolute',\n      width:      '100%',\n      height:     '100%',\n      /*\n      vertical-align: middle, // only applies to inline-level and 'table-cell' elements, use line-height\n      height: 60px,\n      left: 10px,\n      top: 10px,\n      line-height: 55px,\n      font-size: 36px,\n      //border: 1px solid black;\n      //text-shadow: 1px 1px 2px darkgray,\n      //color: black,\n       className={forefront(i) ? \"shadow_ff\" : \"crs_cell\"}\n      */\n      fontWeight: 'bold',\n      //transition: transform 1s, opacity 1s,\n      //backfaceVisibility: visible,\n      // offset-x, offset-y, blur-radius, spread-radius\n      boxShadow: forefront(i) ? '1px 1px 4px 1px black, 0 0 8px 4px #ffd700' : '1px 1px 4px 1px black',\n      //border: 'none',\n      borderRadius: '5px',\n      background: `rgba(${clr},${clr},${clr},${opacity})`, // linear-gradient is not animatable\n      transition: `transform .3s ease-in, background 1s ease-in`,\n      //background: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet),\n      //will-change: transform, background, // hints to browsers how an element is expected to change\n      transform:  transformCell(),\n      /*\n      ...(zoomCard && forefront(i)) && {\n        width:  cell_s*2 + 'px',\n        height: cell_s*2 + 'px'\n      },\n      */\n      //backfaceVisibility: forefront(i) ? 'hidden' : 'visible',\n      zIndex:     forefront(i) && 1000,  // undefined will not be copied\n      '&:hover': {\n        boxShadow: '1px 1px 4px 1px black, 0 0 12px 8px #0ff'\n      }\n    };\n\n    const sekkiNameStyle = {  // 二十四節気\n      textAlign:  'center',\n      cursor:     'pointer',\n      fontSize:   vF(2) + 'vw',\n      transition: 'background .3s ease-in',\n      textShadow: '.4px .4px 0 gold, -.3px -.3px 0 gray',\n      background: `hsl(${heat ? props.hue[i]+',100%' : '0,0%'},${proximity_range(i, 10, 50)}%,${opacity})`,\n      ...horiz ? {\n        borderRadius: '5px 5px 0 0'\n      } : {  // vertical, left column\n        float:        'left',\n        writingMode:  'vertical-lr',\n        height:       '100%',\n        borderRadius: '5px 0 0 5px'\n      }\n    };\n\n    const s72NamesStyle = () => {\n      const fr = r => vF(r) + 'vw';  // font ratio in vw = 1% of viewport width\n\n      return ({  // 七十二候\n        fontSize:     fr(1.7),\n        lineHeight:   fr(1.4),\n        whiteSpace:   'nowrap',\n        '& .s72-yomi': {\n          fontSize:   fr(.5),\n          lineHeight: fr(1.5),\n          color:      'navy',\n        },\n        cursor:       'pointer',\n        '&:hover': {\n          textShadow: '0 0 6px  #fff, 0 0 10px #e60073'\n        },\n        ...horiz ? {\n          float:         'left',\n          width:         '33.33%',       // 3 columns\n          writingMode:   'vertical-rl',  // right-to-left\n          textAlign:     'start',  // align to top, https://24ways.org/2016/css-writing-modes/\n          paddingTop:    '6px',\n          paddingBottom: '6px'\n          //  border: .5px solid black\n        } : {   // vertical, right column\n          textAlign:     'left',\n          height:        '33.3%'\n        }\n      });\n    }\n\n    // 二十四節気card\n    // 七十二候 3 per each sekki card、読み[1],名称[0]\n    const s72col = j => <div css={s72NamesStyle()}>\n      {(cell_s > yomi_min) ? <span className=\"s72-yomi\">{sekki.s72[i][j][1]}<br/></span> : <br />}\n        {sekki.s72[i][j][0]}\n      </div>;\n\n    const onCardClick = () => {\n      if (forefront(i))\n        toggleZoomCard(!zoomCard);\n      else {\n        toggleZoomCard(true);   // when clicked, bring it to the forefront and zoom it always\n        setRotation(rotation + shortest_dist(i));\n      }\n    }\n\n    return (\n      <div key={i}\n           css={crsCellStyle}\n           onClick={()=>onCardClick()}\n      >\n        <div css={sekkiNameStyle}>\n          {sekki.s24[i]}\n        </div>\n        <div>\n          {s72col(0)}\n          {s72col(1)}\n          {s72col(2)}\n        </div>\n      </div>\n    );\n  }\n\n  const lnsCrsCells = [];\n  props.items.forEach( (nm, i) => lnsCrsCells.push( crsCell(i) ));\n\n  const toggleTiltX    = () => setTiltX   ((tilt.x === -90) ? 0 : -90);\n  const toggleTiltY    = () => setTiltY   ((tilt.y ===  90) ? 0 :  90);\n  const toggleScale    = () => setScale   ((scale === def.scale) ? 5 : def.scale);\n  const toggleCardY    = () => setCardRotY((cardRotY === 0) ? 45 : 0);\n  const toggleOpacity  = () => setOpacity ((opacity === 0) ? 1 : 0);\n  const togglePerspect = () => setPerspect((perspect === def.perspect) ? 0 : def.perspect);\n\n  return (\n    <>\n    <TBtnContainer>\n      <TBtn onClick={()=>setMode((mode+1) % 2)}>Mode={isCarousel() ? \"Carousel\" : \"Table\"}</TBtn>\n      <TBtn onClick={()=>toggleHorizontal(!horiz)}>{horiz ? 'Vertical' : 'Horizontal'}</TBtn>\n      <TBtn onClick={()=>togglePerspect()}>Perspective={perspect}px</TBtn>\n      <TBtn                            onClick={()=>setPerspect(perspect + 100)}>Perspective(+100px)</TBtn>\n      <TBtn disabled={perspect <= 100} onClick={()=>setPerspect(perspect - 100)}>Perspective(-100px)</TBtn>\n      <TBtn onClick={()=>toggleHeat(!heat)}>{heat ? 'No color' : 'Heatmap'}</TBtn>\n      <TBtn onClick={()=>toggleZoomCard(!zoomCard)}>{zoomCard ? 'Zoom out' : 'Zoom in'}</TBtn>\n      <TBtn disabled={rotation === 0}         onClick={()=>setRotation(0)}>Rotate(Today)</TBtn>\n      <TBtn onClick={()=>setRotation(rotation + 6)}>Rotate(90°)</TBtn>\n      <TBtn onClick={()=>setRotation(rotation + 1)}>Rotate(+)</TBtn>\n      <TBtn onClick={()=>setRotation(rotation - 1)}>Rotate(-)</TBtn>\n      <TBtn disabled={!horiz}    onClick={()=>toggleTiltX()}>TiltX={tilt.x}°</TBtn>\n      <TBtn disabled={!horiz || tilt.x === -23.5}  onClick={()=>setTiltX(-23.5)}>TiltX(-23.5°)</TBtn>\n      <TBtn disabled={!horiz}    onClick={()=>incTiltX(10)} >TiltX(+10°)</TBtn>\n      <TBtn disabled={!horiz}    onClick={()=>incTiltX(-10)}>TiltX(-10°)</TBtn>\n      <TBtn disabled={horiz}     onClick={()=>toggleTiltY()}>TiltY={tilt.y}°</TBtn>\n      <TBtn disabled={horiz}     onClick={()=>incTiltY(10)} >TiltY(+10°)</TBtn>\n      <TBtn disabled={horiz}     onClick={()=>incTiltY(-10)}>TiltY(-10°)</TBtn>\n      <TBtn disabled={!zoomCard} onClick={()=>toggleScale()}>Scale=x{scale}</TBtn>\n      <TBtn disabled={!zoomCard} onClick={()=>setScale(scale + .5)}>Scale(+.5)</TBtn>\n      <TBtn disabled={!zoomCard || scale <= .5}\n                                 onClick={()=>setScale(scale - .5)}>Scale(-.5)</TBtn>\n      <TBtn                      onClick={()=>toggleCardY()}>Card Y={cardRotY}°</TBtn>\n      <TBtn onClick={()=>setCardRotY(cardRotY + 5)}>Card Y(+)</TBtn>\n      <TBtn                           onClick={()=>toggleOpacity()}>Opacity={opacity.toFixed(1)}</TBtn>\n      <TBtn disabled={opacity >=1}    onClick={()=>setOpacity(opacity + .1)}>Opacity(+.1)</TBtn>\n      <TBtn disabled={opacity <=0}    onClick={()=>setOpacity(opacity - .1)}>Opacity(-.1)</TBtn>\n    </TBtnContainer>\n    <div css={sceneStyle}>\n      <div css={carouselStyle}>\n        <div css={innerSpaceStyle} onClick={()=>toggleHeat(!heat)} />\n        {lnsCrsCells}\n      </div>\n    </div>\n    </>\n  );\n}\n\n/*\n * SVG elements are 2D objects like an image. By putting the SVG element on the CSS 3D space,\n * we can let the CSS engine handle the 3D transformations.\n * 04/29/2019 It does not work for the Firefox. -> Solution: { transform-style: preserve-3d }\n  //\n//  vectorEffect=\"non-scaling-stroke\"\n//\n        <InnerSpace className=\"inner-space\"\n          opacity={.8}\n          onClick={()=>toggleHeat(!heat)}\n          style={{ opacity: isCarousel() ? undefined : .2 }}\n        />\n\nconst InnerSpace = props => {\n  const { opacity, ...other } = props;\n  //const Svg = props => <svg viewBox=\"-100 -100 200 200\" style={{transform: props.rotate}}>{props.children}</svg>;\n\n  const Svg = props => <svg viewBox=\"-100 -100 200 200\" width=\"200px\"\n    style={{\n      left: '-50px',\n      top : '-50px',\n      transform: props.rotate\n    }}>{props.children}</svg>;\n\n  const DemoSvg = () => <>\n        <g fill=\"none\" strokeOpacity=\".5\">\n          <rect x=\"-50\" y=\"-50\" width=\"100\" height=\"100\" strokeWidth=\"1\" stroke=\"lime\"/>\n          <path d=\"M-50,-50L50,50M50,-50L-50,50z\" strokeWidth=\"1\" stroke=\"red\"/>\n        </g>\n    </>;\n  // <circle cx=\"0\" cy=\"0\" r=\"10\" stroke=\"orange\" fill=\"yellow\" opacity={opacity} strokeWidth=\"1\" />\n\n  return (\n    <div {...other}>\n      <Svg rotate=\"rotateX(   45deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateX(   90deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateX(  135deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateY(   0deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateY(22.5deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateY(  45deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateY(67.5deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateY(  90deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateY(112.5deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateY(135deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateY(157.5deg)\"><DemoSvg /></Svg>\n      <div className=\"sun sun-0\"></div>\n      <div className=\"sun sun-x90\"></div>\n      <div className=\"sun sun-y90\"></div>\n    </div>\n  );\n}\n*/\n\n\nconst App = () => {\n  const w = useWindowWidth();\n  const cell_w = round(w/10);\n  const cell_h = round(cell_w * 1.1);\n\n  return (\n    <div css={{\n        fontFamily: 'serif',\n        textAlign:  'center',\n        background: '#191970',\n        height:     '850px'\n      }}\n    >\n      <Card3D items={sekki.s24} hue={sekki_hue} zIndex={100} top={240} cellWidth={cell_w} cellHeight={cell_h} />\n    </div>\n  );\n}\n\nexport default App;\n\n  /*\n  var style = (function() {\n      // Create the <style> tag\n      var style = document.createElement(\"style\");\n      // WebKit hack\n      style.appendChild(document.createTextNode(\"\"));\n      // Add the <style> element to the page\n      document.head.appendChild(style);\n      return style;\n  })();\n  style.sheet.insertRule(`@keyframes solar-term-rotate { from { transform: translateZ(${zoom}px) rotateX(${tilt}deg) rotateY(360deg)} }`, 0);\n  console.log(\"style.sheet.insertRule()\");\n\nfunction getRandom(min, max) {\n        return Math.floor(Math.random() * (max - min + 1)) + min;\n    }           \nvar canvas = document.getElementById(\"starfield\"),\ncontext = canvas.getContext(\"2d\"),\nstars = 500,\ncolorrange = [0,60,240];\nfor (var i = 0; i < stars; i++) {\n    var x = Math.random() * canvas.offsetWidth;\n    y = Math.random() * canvas.offsetHeight,\n    radius = Math.random() * 1.2,\n    hue = colorrange[getRandom(0,colorrange.length - 1)],\n    sat = getRandom(50,100);\n    context.beginPath();\n    context.arc(x, y, radius, 0, 360);\n    context.fillStyle = \"hsl(\" + hue + \", \" + sat + \"%, 88%)\";\n    context.fill();\n}\n\ncanvas {\n    width: 100%;\n    height: auto;\n    background: #111;\n}\n\n*/\n","// util-ui.js\nimport React from 'react';\n\nexport const useWindowWidth = () => {\n  const [winWidth, setWinWidth] = React.useState(window.innerWidth);\n\n  const handleWindowResize = () => {\n    setWinWidth(window.innerWidth);\n  }\n\n  React.useEffect(() => {\n    window.addEventListener('resize', handleWindowResize);\n    return () => window.removeEventListener('resize', handleWindowResize);\n  }, []);\n\n  return winWidth;\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconst rootEl = document.getElementById('root');\nReactDOM.render(<App />, rootEl);\n\nif (module.hot) {\n  module.hot.accept('./App', () => {\n    const NextApp = require('./App').default\n    ReactDOM.render(\n      <NextApp />,\n      rootEl\n    )\n  })\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}