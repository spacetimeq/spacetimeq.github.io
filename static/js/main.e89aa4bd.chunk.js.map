{"version":3,"sources":["util-cal.js","util-math.js","App.js","util-ui.js","serviceWorker.js","index.js"],"names":["getJulianDay","date","getTime","norm_N","N","v","π","Math","PI","radians","abs","sin","cos","tan","min","sign","sqrt","pow","log","max","round","trunc","sekki_hue","modes","sun_pos","n","L","g","longitude","distance","getPosSun","Date","Card3D","props","def","x","y","_React$useState","React","useState","mode","_React$useState2","Object","slicedToArray","setMode","_React$useState3","_React$useState4","horiz","toggleHorizontal","_React$useState5","_React$useState6","heat","toggleHeat","_React$useState7","_React$useState8","zoomCard","toggleZoomCard","_React$useState9","_React$useState10","rotation","setRotation","_React$useState11","_React$useState12","tilt","setTilt","_React$useState13","_React$useState14","scale","setScale","_React$useState15","_React$useState16","cardRotY","setCardRotY","_React$useState17","_React$useState18","opacity","setOpacity","setTiltX","setTiltY","incTiltX","dx","incTiltY","dy","isCarousel","getTilt","cell_n","items","length","deg_n","cell_s","cellWidth","cellHeight","crs_r","rot_a","Number","parseFloat","toFixed","i_ff","elev","console","forefront","i","shortest_dist","m","d","proximity_range","v_min","v_max","sceneStyle","width","height","top","zIndex","carouselStyle","fontSize","transform","concat","crsCell","clr","class_hv","nm","s72col","j","react_default","a","createElement","className","sekki","s72","key","style","trans","cols","m_r","transformCell","undefined","--clr","--opacity","onClick","background","hue","s24","lnsCrsCells","forEach","push","Fragment","App_TestBtn","disabled","TestBtn","assign","children","App","w","window","innerWidth","winWidth","setWinWidth","handleWindowResize","useEffect","addEventListener","removeEventListener","useWindowWidth","cell_w","cell_h","App_Card3D","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","error","rootEl","document","getElementById","ReactDOM","render","src_App_0","URL","process","href","origin","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.e89aa4bd.chunk.js","sourcesContent":["// SpacetimeQ CalUtil, by Soomin K.\n//\nimport Names from './names.json';\n\n// Check if the given year is a leap year in the Gregorian calendar\nexport const IsLeapYear = y =>\n  ((y % 4   === 0) &&\n   (y % 100 !== 0)) ||\n   (y % 400 === 0);\n\n// const DaysInMonth = (m, y) => new Date(y, m, 0).getDate();\n// m: 1..12\n// Gregorian Calendar: Sep. 1752 -> 1,2,14,...30 (11 days advanced)\nexport const DaysInMonth = (m, y) => {\n  switch (m) {\n    case 4:\n    case 6:\n    case 9:\n    case 11: return 30;\n    case 2:  return IsLeapYear(y) ? 29 : 28;\n    default: return 31;\n  }\n}\n\n// Count the number of days with the year up to the specified date\n// m starts from 1\nexport const NthDayInYear = (yr, m, d) => {\n  // For the optimized performance, avoid the loop and use the pre-calculated array\n  // of accumulated days until the month (not a leap year)\n  const accDays = [\n    0,\n    31,\n    31+28,\n    31+28+31,\n    31+28+31+30,\n    31+28+31+30+31,\n    31+28+31+30+31+30,\n    31+28+31+30+31+30+31,\n    31+28+31+30+31+30+31+31,\n    31+28+31+30+31+30+31+31+30,\n    31+28+31+30+31+30+31+31+30+31,\n    31+28+31+30+31+30+31+31+30+31+30\n  // 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11 month\n  ];\n  if (m < 1 || m > 12)\n    return 0;  // valid range check\n  let days = accDays[m-1];\n  if (m > 2 && IsLeapYear(yr))\n    days++;\n  return (days + d);\n}\n\n// 元号 from 西暦\nexport const GengoYear = yr => {\n  for (let i = (Names.Gengo.yr.length - 1); i >= 0; i--)\n    if (yr >= Names.Gengo.yr[i])\n      return Names.Gengo.jp[i] + (yr - Names.Gengo.yr[i] + 1);\n  return yr;   // out of range, just return yr\n}\n\nexport const radian = deg => deg * Math.PI / 180;\n\n// get Julian Day Number\n// Invented in 1583 by Joseph Scaliger\n// The 7980 year cycle (solar, lunar, and a particular Roman tax cycle)\n// Jan.1,4713 B.C. at noon GMT ~ Jan.22,3268 at noon GMT\n// The number of days from Jan. 1, 4713 B.C. at 12:00:00 GMT, until Jan. 1, 1970 at 00:00:00 UTC\n// A day is 86,400 seconds long. UNIX TIM / 86400000 is the number of days since Jan. 1, 1970\n// new Date gives you the number of seconds from epoch until whatever loca ltime your computer has\nexport const getJulianDay = date => (date.getTime() / 86400000.0 + 2440587.5);\n\n// SOURCE: https://news.local-group.jp/moonage/moonage.js.txt\nexport const getMoonAge = date => {\n  // 新月日計算\n  // 引数  　julian  ユリウス通日\n  // 戻り値  与えられたユリウス通日に対する直前の新月日(ユリウス日)\n  const getNewMoon = j => {\n    const n1 = 2451550.09765;\n    const n2 = 29.530589;\n    const n3 = 0.017453292519943;\n    const k  = Math.floor((j - n1) / n2);\n    const t  = k / 1236.85;\n\n    return (\n        n1\n      + n2 * k\n      + 0.0001337 * t * t\n      - 0.40720   * Math.sin((201.5643 + 385.8169 * k) * n3)\n      + 0.17241   * Math.sin((2.5534   +  29.1054 * k) * n3)\n    );\n  }\n  \n  const jd = getJulianDay(date);\n  // console.log('Julian: ', jl);\n  let nm = getNewMoon(jd);\n  // getNewMoonは新月直前の日を与えるとうまく計算できないのでその対処\n  // (一日前の日付で再計算してみる)\n  if (nm > jd) {\n    nm = getNewMoon(jd - 1.0);\n  }\n  // console.log('Moon age:', jd - nm);\n  return (jd - nm);  // moon's age at current time\n}\n\n// normalize for any integer N, maps to the positive integer\n// ex) norm_N(360, -270) = 90\nexport const norm_N = (N, v) => ( (v % N) + N ) % N;  // norm_N(360, x), norm_N(24, x)\n/*\n{\nexport const NormalizeDegree = deg => ( (deg % 360) + 360 ) % 360;\n  if (deg >= 0 && deg < 360)  // Don't allow 360, it should be rewinded to 0.\n    return deg;\n  let nd = deg % 360;\n  if (nd < 0)\n    nd += 360;\n  return nd;\n}\n*/\n\n// Position of the Sun: https://en.wikipedia.org/wiki/Position_of_the_Sun\n// Precision: compared to 国立天文台＞暦計算室＞暦象年表\n// 1.26 ~ 15.41 min (0.0106 degree) for 2019年二十四節気 視黄経 (Tested at Dec.6,2018)\nexport const getPosSun = date => {\n  const n = getJulianDay(date) - 2451545.0;\n  // The mean longitude of the Sun, corrected for the aberration of light\n  const L = norm_N(360, 280.460 + 0.9856474*n );  // in degree\n  // The mean anomaly of the Sun\n  const g = radian( 357.528 + 0.9856003*n );  // in radian\n  // The ecliptic longitude of the Sun\n  return {\n    longitude: norm_N(360, L + 1.915*Math.sin(g) + 0.020*Math.sin(2*g) ),\n    distance: 1.00014 - 0.01671*Math.cos(g) - 0.00014*Math.cos(2*g)\n  };\n}\n","// Math definitions: Just for readability\n// https://github.com/d3/d3-geo/blob/master/src/math.js\n\n// consider degeneracy and robustness\n\nexport const τ    = Math.PI*2;\nexport const π    = Math.PI;\nexport const π_2  = Math.PI/2;\nexport const π_4  = Math.PI/4;\nexport const ε    = 1e-6;      // a small threshold value for the floating point computation\nexport const ε2   = 1e-12;\n\nexport const deg360 = 360;         // declare the special degree as the constant, name it.\nexport const deg180 = 180;\nexport const deg90  = 90;\nexport const degrees = deg180 / π;\nexport const radians = π / deg180;\nexport const π_2xdegrees = deg90;  // π/2 x degrees\nexport const abs   = Math.abs;\nexport const sin   = Math.sin;\nexport const cos   = Math.cos;\nexport const tan   = Math.tan;\nexport const sign  = Math.sign;\nexport const sqrt  = Math.sqrt;\nexport const pow   = Math.pow;\nexport const log   = Math.log;\n\nexport const min   = Math.min;\nexport const max   = Math.max;\nexport const round = Math.round;\nexport const trunc = Math.trunc;\n\nexport const zero    = v => abs(v) < ε;        // is virtually zero?\nexport const epsilon = v => zero(v) ? 0 : v;   // reduce an infinitesimal number to zero\n\n// to avoid NaN for the invalid domain ranges\nexport const asin = x => x > 1 ? π/2 : x < -1  ? -π/2 : Math.asin(x);\nexport const acos = x => x > 1 ? 0   : x < -1  ? π    : Math.acos(x);\n\nexport const haversin = x => (x = sin(x/2))*x;\nexport const range = (x, r1, r2) => min(max(x, r1), r2);  // let r1 ≦ x ≦ r2\n","/*\n * SpacetimeQ Calendar, v0.1\n * Card-type UI (札型カレンダー)\n *\n * =================================================\n * Issues\n * -------------------------------------------------\n * 04/27/2019 'scale3d()' has a quality issue (blurry) for firefox and safai.\n *            'translateZ()' has the same trouble. Only works well for Chrome.\n *\n */\n\nimport React from 'react';\n//import { temp2Hue } from './WeatherUtil';\nimport './App.scss';\nimport sekki from './sekki.json';\nimport { getPosSun, norm_N } from './util-cal';\nimport { useWindowWidth }    from './util-ui';\nimport {\n  max, min, round, trunc, abs,\n  π, deg360, radians, sin, cos, tan\n} from './util-math';\n\n/*\n * sekki 節気\n * s24 二十四節気\n * s72 七十二候 24 x 3 arrays of [0:名称,1:読み,2:意味]\n *   sekki.s72[0..23 二十四節気(春分..啓蟄)][0..2 初候,次候,末候][0..2 名称,読み,意味]\n * \n *\n*/\n// I want to preprocess / compile JavaScript to generate CSS/SASS file.\n\n/*\nconst hue_avg = temp_avg.map(t => temp2Hue(t));\n*/\n\nconst sekki_hue = [\n  150, 115,  87,  141,  69,  57,\n   70,  25,   5,  22,   3,  40,\n   58,  61,  98,  108, 156, 150,\n  161, 198, 237,  205, 182, 188\n];\n\n/*\nconst fetchJSON = (url, cbSetData, cbError) => {\n  // ~/D/nodejs/fileserver$ node server.js\n  fetch(url)\n    .then(response => {\n       const contentType = response.headers.get(\"content-type\");\n       console.log('contentType:', contentType);\n       if (contentType && contentType.includes(\"application/json\"))\n         return response.json();\n       throw new TypeError(\"Oops, no JSON file! \");\n    })  // parses response to JSON\n    .then(cbSetData)\n    .catch(cbError);\n}\n*/\n\n/*\nn sides carousel\ntan(π / n) = (l/2) / r\nr = l / ( 2 tan(π/n) )\n*/\n\nconst modes = {\n  PLANE    : 0,\n  CAROUSEL : 1\n}\n\nconst sun_pos = getPosSun(new Date());      // today's sun's position {longitude: 0, distance: 0};\n\n// There exist two coordinate systems: Carousel-centered and Cell-centered\n// =======================================================================\n// Carousel-centered Coord.\n// -----------------------------------------------------------------------\n// X: tilt\n// Y: rotation\n// Z: 0 horizontal (left to right), 90deg vertical (to be a top to bottom order)\n// =======================================================================\n// Cell(Card)-centered Coord.\n// -----------------------------------------------------------------------\n// x: card face view angle (normal) should be adjusted wrt the Carousel tilt\n// y: side flip\n// z: rotate\n\nconst Card3D = props => {\n  const def = {  // default values\n    tilt    : {x: -23.5, y: 0},  // x: -23.5\n    scale   : 1.5,\n    opacity : .8\n  };\n  const [mode,     setMode]          = React.useState(props.mode);  // 0: Grid 1: Carousel 2: Helix\n  const [horiz,    toggleHorizontal] = React.useState(true);        // Is horizontal, or vertical carousel\n  const [heat,     toggleHeat]       = React.useState(true);        // Show heatmap?\n  const [zoomCard, toggleZoomCard]   = React.useState(false);       // Zoom in active card?\n  const [rotation, setRotation]      = React.useState(0);           // rotate active (zoom) index\n  const [tilt,     setTilt]          = React.useState(def.tilt);    // tilt of the carousel, rotationX\n  const [scale,    setScale]         = React.useState(def.scale);   // scale of the active card\n  const [cardRotY, setCardRotY]      = React.useState(0);           // card rotation Y\n  const [opacity,  setOpacity]       = React.useState(def.opacity); // opacity of the carousel\n\n  const setTiltX = x  => setTilt({x: x,      y: tilt.y});\n  const setTiltY = y  => setTilt({x: tilt.x, y: y});\n  const incTiltX = dx => setTiltX(tilt.x + dx);\n  const incTiltY = dy => setTiltY(tilt.y + dy);\n  const isCarousel = () => (mode === modes.CAROUSEL);\n\n  const getTilt = () => horiz ? tilt.x : tilt.y;\n  const cell_n  = props.items.length;\n  const deg_n   = deg360 / cell_n;\n  const cell_s  = horiz ? props.cellWidth : props.cellHeight;  // offsetWidth\n  const crs_r   = round( cell_s / ( 2 * tan(π / cell_n) ) );\n  const rot_a   = Number.parseFloat( (sun_pos.longitude + (rotation - .5) * deg_n).toFixed(2));\n  let cardRotX  = 0;   // rot_a,  the adjustment (rotation - .5) is needed because the cell was center aligned\n\n  const i_ff = trunc( norm_N(deg360, rot_a) / deg_n );  // index of the forefront cell\n\tconst elev = round( abs(sin(getTilt() * radians) * cell_s * .6) );  // elevation for the selected card\n  //*********************************** DEBUG OUTPUT\n  console.log(\"rot_a:\", rot_a, \"crs_r\", crs_r, \"elev:\", elev);\n  //*********************************** DEBUG OUTPUT\n  \n  const forefront = i => (i === i_ff);  // check if i is the index of the forefront cell\n  // get the index difference for the shortest path\n  // index: 0..(cell_n-1), output range should be -m..+m\n  const shortest_dist = i => {\n    const m = cell_n / 2;  // middle point index\n    let d = i - i_ff;\n    if (d < -m)\n      d = cell_n + d;\n    else if (d > m)\n      d = d - cell_n;\n    return d;\n  }\n\n  // distance between two points in:0..23, out:0..12 then normalize 1..0\n  const proximity_range = (i, v_min, v_max) => (isCarousel()) ?\n    v_min + round( (v_max - v_min) * (1 - (abs(shortest_dist(i)) * cos(getTilt() * radians) / 12) ) ) :\n    v_max;\n\n  const sceneStyle = {\n    width:  props.cellWidth,\n    height: props.cellHeight,\n    top:    props.top,\n    zIndex: props.zIndex\n  };\n\n  const transformCrs = () => {\n    if (isCarousel()) {\n      return `translateZ(${-crs_r}px)`\n             + (horiz ? ` rotateX(${tilt.x}deg)` :\n                        ` rotateZ(90deg) rotateX(${tilt.y}deg)`)\n             + ` rotateY(${-rot_a}deg)`;\n    } else {\n      return `translateZ(0px)`;\n    }\n  } \n\n  const carouselStyle = {\n    //lineHeight: Math.round(props.cellHeight) + 'px',\n    fontSize:  round(props.cellWidth/5) + 'px',\n    transform: transformCrs()\n  };\n\n  const crsCell = i => {  // Render each cell(card)\n\n    const clr = proximity_range(i, 64, 255);  // color value (0..255) according to the distance from the forefront cell\n    \n    const transformCell = () => {  // Cell coord.\n      let trans;\n      if (isCarousel()) {\n        trans = (zoomCard && forefront(i)) ?\n          `rotateY(${norm_N(deg360, rot_a)}deg) translateZ(${crs_r + elev + 80}px) scale3d(${scale},${scale},${scale})` :\n          `rotateY(${i*deg360/cell_n}deg) translateZ(${crs_r + elev}px)`;\n        // rotateY: starting longitude of the 24 cells (cards)\n        if (!horiz)\n          trans += ` rotateZ(-90deg)`;   // vertical\n      } else {\n        const cols = cell_n / 4;\n        const m_r  = max(scale * .8, 1);  // margin ratio\n        const x = (-2.5 +      (i % cols)) * (props.cellWidth  * m_r);\n        const y = (-1.5 + trunc(i / cols)) * (props.cellHeight * m_r);\n        trans = `translateX(${x}px) translateY(${y}px)`;\n        if (zoomCard && forefront(i))\n          trans += ` translateZ(100px) scale(3)`;\n      }\n      if (cardRotX || tilt.x) trans += ` rotateX(${cardRotX + (horiz ? -tilt.x : 0)}deg)`;\n      if (cardRotY || tilt.y) trans += ` rotateY(${cardRotY + (horiz ? 0 : -tilt.y)}deg)`;\n      return trans;\n    }\n\n    // 二十四節気card\n    const class_hv = nm => horiz ? nm : nm + \"_v\";\n\n    // 七十二候 3 per each sekki card、読み[1],名称[0]\n    const s72col = j => <div className={class_hv(\"s72-names\")}>\n        {(cell_s > 60) && <span className=\"s72-yomi\">{sekki.s72[i][j][1]}<br/></span>}\n        {sekki.s72[i][j][0]}\n      </div>;\n\n    const onCardClick = () => {\n      if (forefront(i))\n        toggleZoomCard(!zoomCard);\n      else {\n        toggleZoomCard(true);   // when clicked, bring it to the forefront and zoom it always\n        setRotation(rotation + shortest_dist(i));\n      }\n    }\n\n    return (\n      <div key={i} className={forefront(i) ? \"crs_cell shadow_ff\" : \"crs_cell\"}\n           style={{  // cell style\n             transform  :  transformCell(),\n             //backfaceVisibility: forefront(i) ? 'hidden' : 'visible',\n             zIndex     : forefront(i) ? 1000 : undefined,  // undefined will not be copied\n             '--clr'    : clr, // linear-gradient is not animatable\n             '--opacity': opacity\n           }}\n           onClick={()=>onCardClick()}>\n        <div className={class_hv(\"sekki-name\")}\n          style={{background: `hsla(${heat ? props.hue[i]+',100%' : '0,0%'},${proximity_range(i, 10, 50)}%,${opacity})`}}\n        >\n          {sekki.s24[i]}\n        </div>\n        <div>\n          {s72col(0)}\n          {s72col(1)}\n          {s72col(2)}\n        </div>\n      </div>\n    );\n  }\n\n  const lnsCrsCells = [];\n  props.items.forEach( (nm, i) => lnsCrsCells.push( crsCell(i) ));\n\n  const InnerSpace = props => {\n    return (\n      <div {...props}>\n        <div className=\"sun sun-0\"></div>\n        <div className=\"sun sun-x90\"></div>\n        <div className=\"sun sun-y90\"></div>\n      </div>\n    );\n  }\n\n  const toggleTiltX   = () => setTiltX((tilt.x === -90) ? 0 : -90);\n  const toggleTiltY   = () => setTiltY((tilt.y ===  90) ? 0 :  90);\n  const toggleScale   = () => setScale((scale === def.scale) ? 5 : def.scale);\n  const toggleCardY   = () => setCardRotY((cardRotY === 0) ? 45 : 0);\n  const toggleOpacity = () => setOpacity((opacity === 0) ? 1 : 0);\n\n  return (\n    <>\n    <div className=\"btn-container\">\n      <TestBtn onClick={()=>setMode((mode+1) % 2)}>Mode: {(mode === modes.CAROUSEL) ? \"Carousel\" : \"Plane\"}</TestBtn>\n      <TestBtn onClick={()=>toggleHorizontal(!horiz)}>{horiz ? 'Vertical' : 'Horizontal'}</TestBtn>\n      <TestBtn onClick={()=>toggleHeat(!heat)}>{heat ? 'No color' : 'Heatmap'}</TestBtn>\n      <TestBtn onClick={()=>toggleZoomCard(!zoomCard)}>{zoomCard ? 'Zoom out' : 'Zoom in'}</TestBtn>\n      <TestBtn disabled={rotation === 0}         onClick={()=>setRotation(0)}>Rotate(Today)</TestBtn>\n      <TestBtn onClick={()=>setRotation(rotation + 6)}>Rotate(90°)</TestBtn>\n      <TestBtn onClick={()=>setRotation(rotation + 1)}>Rotate(+)</TestBtn>\n      <TestBtn onClick={()=>setRotation(rotation - 1)}>Rotate(-)</TestBtn>\n      <TestBtn disabled={!horiz}    onClick={()=>toggleTiltX()}>TiltX={tilt.x}°</TestBtn>\n      <TestBtn disabled={!horiz || tilt.x === -23.5}    onClick={()=>setTilt(def.tilt)} >TiltX(-23.5°)</TestBtn>\n      <TestBtn disabled={!horiz}    onClick={()=>incTiltX(10)} >TiltX(+10°)</TestBtn>\n      <TestBtn disabled={!horiz}    onClick={()=>incTiltX(-10)}>TiltX(-10°)</TestBtn>\n      <TestBtn disabled={horiz}     onClick={()=>toggleTiltY()}>TiltY={tilt.y}°</TestBtn>\n      <TestBtn disabled={horiz}     onClick={()=>incTiltY(10)} >TiltY(+10°)</TestBtn>\n      <TestBtn disabled={horiz}     onClick={()=>incTiltY(-10)}>TiltY(-10°)</TestBtn>\n      <TestBtn                      onClick={()=>toggleScale()}>Scale=x{scale}</TestBtn>\n      <TestBtn                      onClick={()=>setScale(scale + .5)}>Scale(+.5)</TestBtn>\n      <TestBtn disabled={scale <= .5}\n                                    onClick={()=>setScale(scale - .5)}>Scale(-.5)</TestBtn>\n      <TestBtn                      onClick={()=>toggleCardY()}>Card Y={cardRotY}°</TestBtn>\n      <TestBtn onClick={()=>setCardRotY(cardRotY + 5)}>Card Y(+)</TestBtn>\n      <TestBtn                           onClick={()=>toggleOpacity()}>Opacity={opacity.toFixed(1)}</TestBtn>\n      <TestBtn disabled={opacity >=1}    onClick={()=>setOpacity(opacity + .1)}>Opacity(+.1)</TestBtn>\n      <TestBtn disabled={opacity <=0}    onClick={()=>setOpacity(opacity - .1)}>Opacity(-.1)</TestBtn>\n    </div>\n    <div className=\"crs_scene\" style={sceneStyle}>\n      <div className=\"crs_body\" style={carouselStyle}>\n        <InnerSpace onClick={()=>toggleHeat(!heat)} style={{opacity: isCarousel() ? 1 : .2, }} />\n        {lnsCrsCells}\n      </div>\n    </div>\n    </>\n  );\n}\n\n/*\n * SVG elements are 2D objects like an image. By putting the SVG element on the CSS 3D space,\n * we can let the CSS engine handle the 3D transformations.\n * 04/29/2019 It does not work for the Firefox.\n\n//  vectorEffect=\"non-scaling-stroke\"\n//\nconst SolarSystem = props => {\n  const { opacity, ...other } = props;\n  //const Svg = props => <svg viewBox=\"-100 -100 200 200\" style={{transform: props.rotate}}>{props.children}</svg>;\n\n  const Svg = props => <svg viewBox=\"-100 -100 200 200\" width=\"200px\"\n    style={{\n      left: '-52px',\n      top : '-52px',\n      transform: props.rotate\n    }}>{props.children}</svg>;\n  const DemoSvg = () => <>\n        <g fill=\"none\" strokeOpacity=\".5\">\n          <rect x=\"-50\" y=\"-50\" width=\"100\" height=\"100\" strokeWidth=\".5\" stroke=\"lime\"/>\n          <path d=\"M-50,-50L50,50M50,-50L-50,50z\" strokeWidth=\".5\" stroke=\"red\"/>\n        </g>\n        <circle cx=\"0\" cy=\"0\" r=\"10\" stroke=\"orange\" fill=\"yellow\" opacity={opacity} strokeWidth=\"1\" />\n    </>;\n\n  return (\n    <div className=\"solar-systen\" {...other}>\n      <Svg rotate=\"rotateX(   45deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateX(   90deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateX(  135deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateY(   0deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateY(22.5deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateY(  45deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateY(67.5deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateY(  90deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateY(112.5deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateY(135deg)\"><DemoSvg /></Svg>\n      <Svg rotate=\"rotateY(157.5deg)\"><DemoSvg /></Svg>\n    </div>\n  );\n}\n        <SolarSystem opacity={opacity} onClick={()=>toggleHeat(!heat)} />\n*/\n\nconst TestBtn = props => <button className=\"test-btn\" {...props}>{props.children}</button>;\n\nconst App = () => {\n  const w = useWindowWidth();\n  const cell_w = min( round(w/10), 160);\n  const cell_h = round(cell_w * 1.1);\n\n  return (\n    <div className=\"App\" style={{height: '850px'}}>\n      <Card3D mode={modes.PLANE} items={sekki.s24} hue={sekki_hue} zIndex={100} top={240} cellWidth={cell_w} cellHeight={cell_h} />\n    </div>\n  );\n}\n\nexport default App;\n\n  /*\n  var style = (function() {\n      // Create the <style> tag\n      var style = document.createElement(\"style\");\n      // WebKit hack\n      style.appendChild(document.createTextNode(\"\"));\n      // Add the <style> element to the page\n      document.head.appendChild(style);\n      return style;\n  })();\n  style.sheet.insertRule(`@keyframes solar-term-rotate { from { transform: translateZ(${zoom}px) rotateX(${tilt}deg) rotateY(360deg)} }`, 0);\n  console.log(\"style.sheet.insertRule()\");\n*/\n","// util-ui.js\nimport React from 'react';\n\nexport const useWindowWidth = () => {\n  const [winWidth, setWinWidth] = React.useState(window.innerWidth);\n\n  const handleWindowResize = () => {\n    setWinWidth(window.innerWidth);\n  }\n\n  React.useEffect(() => {\n    window.addEventListener('resize', handleWindowResize);\n    return () => window.removeEventListener('resize', handleWindowResize);\n  }, []);\n\n  return winWidth;\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconst rootEl = document.getElementById('root');\nReactDOM.render(<App />, rootEl);\n\nif (module.hot) {\n  module.hot.accept('./App', () => {\n    const NextApp = require('./App').default\n    ReactDOM.render(\n      <NextApp />,\n      rootEl\n    )\n  })\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}